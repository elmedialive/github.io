<!DOCTYPE html>
<!-- saved from url=(0028)https://cleanfeed.net/studio -->
<html><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">  <title>Cleanfeed</title> <link rel="icon" type="image/png" href="https://cleanfeed.net/img/favicon"> <style>body.console {color:#666;background-color:#2a2d2d;padding:0 0 56px 0;/* space for watermark */margin:8px;}#watermark {z-index:-1;position:fixed;left:10pt;bottom:10pt;}.console hr {background-color:#444;height:2px;border:none;margin-top:0;margin-bottom:8px;}/* A common style for all console units;defines overall* layout and spacings */.unit {padding:0;margin-top:8px;margin-bottom:8px;}.contrib {font-size:12pt;}/** The top bar of a contributor,device etc.*/.headline {background-color:#7f8c8d;display:flex;}.headline .toggle {margin:0;padding:0;flex:1;display:inherit;overflow:hidden;}.headline .indicator {width:70px;background:#333;display:flex;align-items:center;justify-content:center;}.headline .indicator img {min-width:16px;min-height:16px;margin:6px;width:50%;height:50%;max-width:75%;max-height:35px;/* Chrome 49 requires absolute */}.headline .meter {width:10px;height:60px;margin:5px;}.headline .text {margin:10px 10px 10px 3px;flex-grow:1;overflow-x:hidden;white-space:nowrap;}.headline .text p {margin:2px;padding:0;}.headline .button {padding:0;padding-right:8px;padding-left:8px;background-color:inherit;border-left:1px solid #757575;border-radius:0;min-width:24px;}.headline .button.engaged {background-color:#626969;}.headline .button:hover {background-color:#969696;}.headline .button img {height:20px;margin:auto;}.headline .button img.tall {height:100%;width:17px;}.contrib .pane .fields > * {min-width:0;flex-shrink:1;}.contrib .pane .fields > .device {flex-grow:1;flex-shrink:2;}.unit + .pane {margin-bottom:0;}.name {font-size:130%;color:#fff;}/** Slide-out panel for extra settings etc.*/.pane {padding:2px;margin-left:70px;font-size:smaller;color:#fff;background-color:#1d70b7;border-top:1px solid #0e539e;}.pane > * {margin-bottom:2px;}.pane > :last-child {margin-bottom:0;}.pane .tty {padding:1px;}img#texture {z-index:-2;position:fixed;left:-5%;bottom:-100px;height:120%;overflow:hidden;opacity:0.015;}</style><style>body {font-family:sans-serif;font-size:15pt;padding:0;margin:0;user-select:none;-webkit-user-select:none;-moz-user-select:none;cursor:default;}#hud {z-index:50;position:fixed;bottom:0;left:0;width:100%;display:flex;flex-direction:column;}.console #hud {bottom:56px;}/** Text formatting*/ul {padding-left:1.5em;padding-right:1.5em;}.content h1,.content h2,.content h3,.content p,.content ul {margin-top:18px;margin-bottom:18px;}/** An HTML element that we are going to clone programatically*/.template {display:none !important}/** A hidden element;don't allow other 'display' styles to* override this*/*[hidden] {display:none !important}/** General styles for buttons*/.button {font-size:smaller;font-weight:bold;background:#a70;color:#fff;border:none;border-radius:4px;margin:0;padding:4px 5px 4px 5px;transition:background 0.25s,color 0.1s;display:inline-flex;cursor:pointer;}.button > * {margin:auto 1px auto 1px;}.button:hover {background:#d90;}.button.good {background:#260;color:#fff;}.button.good:hover {background:#390;}.button.bad {background:#600;}.button.bad:hover {background:#900;}.button img {vertical-align:middle;height:22px;opacity:1.0;transition opacity 0.1s;}.button.disabled {cursor:default;background:#999;color:#bbb;pointer-events:none;}.button.disabled img {opacity:0.6;}/** AsyncButton*/.button.pending {position:relative;cursor:default;pointer-events:none;}.button.pending div {visibility:hidden;}.button.pending img {visibility:hidden;}.button img.waiting {display:none;}.button.pending img.waiting {position:absolute;display:block;visibility:visible;left:30%;width:40%;animation:pulse 1.0s 0s infinite;}/** UpdateForm*/.button .yes {display:none;}.button.clean * {display:none;}.button.clean .yes {display:block;}@keyframes pulse {0% { opacity:0.5 }50% { opacity:1.0 }100%{ opacity:0.5 }}/** Pages sit on top of the main console*/.page {position:fixed;top:0;left:0;width:100%;height:100%;overflow-y:auto;overflow-x:auto;visibility:hidden;}.popout {overflow:hidden;transition:max-height 0.3s ease;}.popout:not(.engaged) {display:none;}.tty {font-family:"Courier New","Courier",monospace;line-height:130%;background:#111;padding:2px;color:#aaa;word-wrap:break-word;white-space:pre;user-select:text;-webkit-user-select:text;-moz-user-select:text;cursor:text;}.tty a {color:#999;}a,a:visited {color:#eee;transition:color 0.1s;}a:hover,a:active {color:#fff;}.tty.log {height:160px;max-height:160px;overflow-x:auto;overflow-y:scroll;}li {margin-bottom:18px;}/** Form basics** Shared across all forms including the login screen*/input[type=text],input[type=password],input[type=email],textarea {font-family:"Courier New","Courier",monospace;font-size:100%;padding:10px;box-sizing:border-box;width:100%;background:#111;color:#aaa;border:none;}input[type=checkbox] {margin-left:6px;margin-right:6px;}input::-webkit-input-placeholder,textarea::-webkit-input-placeholder {color:#4f4c4f;text-transform:none;letter-spacing:0;font-weight:normal;}input.invalid,textarea.invalid {background-color:#542831 !important;color:#eee !important;}input.invalid::-webkit-input-placeholder,textarea.invalid::-webkit-input-placeholder {color:#845861 !important;}textarea {/* hack to prevent extra space below that is not part of margin */vertical-align:bottom;}select {font-size:100%;margin:0;padding:8px 1.2em 8px 8px;box-sizing:border-box;width:100%;background-color:#111;color:#999;border:none;cursor:context-menu;/* Override some default styling on Mac (tested Chrome 51) */-webkit-appearance:none;-moz-appearance:none;border-radius:0;background-image:url(icon/dropdown);background-size:1em 0.3em;background-repeat:no-repeat;background-position:right;}select:disabled {cursor:inherit;color:#4f4c4f;background-image:none;}select option:disabled {color:#4f4c4f;}.subtext {border-left:4px solid #555;margin-left:0.2em;padding-left:6px;font-size:70%;color:#ccc;}.verbatim {font-style:italic;}/** An alert message inline on the screen*/.alert {overflow:hidden;font-size:75%;color:#fff;background:#903;padding:0;padding-left:8px;padding-right:8px;box-sizing:border-box;border:none;transition:max-height 0.3s ease;}.alert:not(.engaged) {display:none;}.alert p {margin:0;padding-top:6px;padding-bottom:6px;}/** A row of buttons or controls in a form*/.content .row {margin-top:0.4em;margin-bottom:0.4em;max-width:320px;}/** Manage the visual relationship between form and popouts*/.content .pre_popout {margin-bottom:0;}/** Form row which contains several fields for compactness*/.fields {display:flex;align-items:center;}.fields > * {width:auto;margin-right:6px;}.pane .fields > * {margin-right:3px;}.fields > :last-child {margin-right:0;}/** A 'validated' input field paired closely with its own alert*/.validated > input,.validated > textarea {margin-bottom:0;}.validated > .alert {margin-top:0;border-top-left-radius:0;border-top-right-radius:0;}/** S single data entry which is combined with its submit button*/.changer {display:flex;align-items:inherit;}.changer .button {margin-left:0;border-top-left-radius:0;border-bottom-left-radius:0;}.changer input {flex:1;margin-right:0;}.changer select {flex:1;margin-right:0;}/** A list of related checkboxes*/ul.checklist li {list-style-type:none}ul.checklist input {margin:0;padding:0;margin-left:-32px;width:32px;}ul.checklist li .subtext {margin-top:0.6em;font-weight:normal;border:none;padding-left:0;}/** Terms and conditions*/iframe.terms {margin:0;padding:0;border:none;height:260px;width:100%;}/** Intro screen hides any ugly loading*/#intro {z-index:100;position:fixed;top:0;left:0;width:100%;height:100%;}/** Text labels that show which features are available*/.insignia {display:inline;font-size:76%;font-weight:bold;text-transform:uppercase;}.insignia_beta::before {display:inline;padding:0.1em;background-color:#f36;color:#fff;content:'Beta';}.insignia_pro::before {display:inline;padding:0.17em;border-radius:0 0.3em 0 0.3em;border:1px solid currentColor;font-weight:normal;opacity:0.9;content:'Pro';}@media (max-width:660px) {h2 {font-size:18pt;}}</style><style>/** Layout scheme for 'entry' screens that aren't the main console;* things like sign-in,sign-up,subscription centre*/.entry {z-index:30;}.entry > .content {padding:10%;padding-top:0;padding-bottom:0;}.entry img.logo {padding:30px;height:52px;width:auto;}.entry footer {padding:30px;margin-left:auto;margin-right:auto;font-size:9pt;}/** The main login page*/.entry.login {padding-top:60px;text-align:center;}.entry.login > * {margin-left:auto;margin-right:auto;}.entry.login footer {padding-top:100px;}#login img.logo {height:124px;}</style><style>/** The login screen is heavily tailored as its often used*/#login > form input[type=text],#login > form input[type=password] {border-bottom:2px solid #333;}#login > form {max-width:240px;}#forgot {max-width:320px;}#forgot > * {margin-left:auto;margin-right:auto;}#forgot > p {max-width:240px;text-align:left;}</style><style>#notifications {font-size:12pt;padding:0 24pt 18pt 24pt;}#notifications .notification {background-color:rgba(24,24,24,0.8);color:#fff;padding:6pt;margin-bottom:8pt;border-left:4px solid #555c;}#notifications .notification:not(.undoable) {cursor:pointer;}#notifications .notification.undoable {display:flex;align-items:center;padding:0;}#notifications .notification .message {flex:1;padding:6pt;}#notifications .button {background:none;border:none;border-radius:unset;border-left:1px solid #464646;padding-right:7pt;opacity:0.5;transition:opacity 0.25s;}#notifications .button:hover {opacity:1.0;}</style><style>/** The overlay** This is the location for any 'modal' operations within the console,* such as error messages or forms.** It makes for a better experience on small-screen devices to* allow us to take up the whole screen like this.*/#overlay {z-index:40;background-color:rgba(42,45,45,0.95);color:#fff;}#overlay-close {width:32px;height:32px;padding:5%;padding-bottom:0;cursor:pointer;}#overlay > .content {padding:10%;padding-top:0;}</style><style>.cartwall {color:#aaa;background-color:rgba(64,64,64,0.75);display:flex;font-size:12pt;}.cartwall .carts {padding:2px;flex:1;}.cartwall .controls {background-color:#444;padding:2px;font-size:smaller;}.cartwall .cart {position:relative;display:inline-block;vertical-align:top;background-color:#7f8c8d;height:66px;width:66px;margin:2px;padding:3px;/* For icons */background-repeat:no-repeat;background-position:center;background-size:50%;}.cartwall .cart .meter {position:absolute;right:3px;bottom:3px;width:8px;height:50%;visibility:hidden;}/** When loading we switch out the name for an image*/.cartwall .cart.loading {background-color:#333;background-image:url(icon/waiting);}.cartwall .cart.loading .name {color:#666;}.cartwall .cart.errored {background-color:#d90;background-image:url(icon/warning);}/** Carts are clearly displayed when playing*/.cartwall .cart.playing {background-color:#27ae60;}.cartwall .cart.playing .meter {visibility:inherit;}/** The 'gap' to add new cart into this cartwall*/.cartwall .cart.potential {background:none;/* Shrink slightly to allow for border */height:64px;width:64px;}.cartwall .cart {text-overflow:clip;overflow-x:hidden;white-space:nowrap;}.cartwall .cart .name {font-size:12pt;}.cartwall .cart .suffix {font-size:11pt;}.cartwall .cart.loading .suffix {display:none;}/** The gap that appears inbetween carts when dragging*/.cartwall .dropzone {display:inline-block;vertical-align:top;width:0;height:1px;transition:width 0.25s ease;}.cartwall .dropzone.nominated {width:76px;/* width plus margins */}/** The cart that is being moved*/.cartwall .cart.moving {max-width:0}</style><style>/** Toolbar at the top of the screen*/.toolbar {background-color:#7f8c8d;background:linear-gradient(#7f8c8d,#738182);font-size:10pt;display:flex;margin-top:-8px;margin-left:-8px;margin-right:-8px;border-top:1px solid #5a5a5a;border-bottom:1px solid #5a5a5a;}.toolbar > * {padding:8px;border-right:1px solid #757575;border-radius:0;}.toolbar > *:last-child {border-right:none;}.toolbar :not(.button) {flex-grow:1;}.toolbar .button {background-color:inherit;}.toolbar .button.engaged {background-color:#626969;}.toolbar .button:hover {background-color:#969696;}@media (max-width:420px) {.toolbar .button > div {overflow-x:hidden;transition:max-width 0.5s ease;max-width:0px;}.toolbar .button:hover > div {visibility:inherit;max-width:8em;}}.toolbar .button img {height:20px;}/** Visible gap showing the user where a new element will go*/.potential {color:#777;background-color:rgba(64,64,64,0.75);border:1px solid #444;font-size:10pt;text-align:center;padding:18px;transition:all 0.25s;}.potential:hover {color:#fff;border:1px solid #fff;}#production > :not(.template) { /* FIXME:revisit when multi cartwall */margin-top:0;}#decks .unit:not(.paused) .indicator {background:#cf0000;}#decks .unit.paused .status::after {content:' Paused';}</style><style>.multitrack .tracks {background-color:#7f8c8d;display:flex;flex-direction:column;}.multitrack .track {display:flex;height:14pt;background-color:#3b3b3b;align-items:center;font-size:smaller;height:32px;margin:0;border-bottom:1px solid #4a4f4f;}.multitrack .track:last-child {border-bottom:none;}.multitrack .track > * {box-sizing:border-box;padding:3px;}.multitrack .track .meter {width:11px;height:100%;}.multitrack .track .name {flex-grow:1;}.multitrack .track .button {height:100%;background-color:transparent;border-radius:0;}.multitrack .track .button:hover {background-color:#4c4c4c;}.multitrack .track .button img {width:12pt;max-height:65%;opacity:0.8;}.multitrack .track .button.download {padding-right:4px;padding-left:4px;}</style><style>#trying {background-color:#111d;color:#f6f6f6;padding:10pt;width:100%;box-sizing:border-box;flex-direction:row;flex-wrap:wrap;display:none;}#trying > *  {}#trying > .logo {flex-grow:1;flex-basis:100%;}#trying > .message {flex:1;margin-right:1em;}#trying > .buttons {display:flex;flex-direction:column;align-items:center;}#trying .nothanks {font-size:9pt;margin:1em;}#trying > .message p {margin:0;max-width:660px;}#trying > .message p.subtext {margin-top:8pt;margin-bottom:10pt;}@media (max-width:420px) {#trying > .message {flex-basis:100%;margin-right:none;}#trying > .buttons {flex-direction:row;margin-bottom:10pt;}#trying .nothanks {margin-top:0;margin-bottom:0;}}.trial #trying {display:flex;}/** The watermark is superceded by the logo in overlay */.trial #watermark {display:none;}.trial #hud {bottom:0;}body.trial {margin-bottom:180px;/* enough space for #trying */}</style><style>/** The 'plum' theme is the darker style used for supporting* elements and more serious processes*/.plum {background-color:#111;color:#ccc;}.plum input[type=text],.plum input[type=password],.plum input[type=email],.plum select,.plum textarea {background-color:#222;color:#ccc;}.plum form input::-webkit-input-placeholder {color:#666;}/* A pseudo-field in a form that displays information only */.plum input.precompleted,.plum textarea.precompleted {background:transparent !important;border:1px solid #444;}.plum .button.disabled {background:#777;color:#ccc;}.plum .button.disabled:hover {background:#777;}.plum .alert {background:#501;}</style><style>.tabs {display:flex;}/** Layout*/.tabs .nav {width:9em;}.tabs .main {flex:1;}/** Navigation bar styling*/.tabs .nav {padding:0;padding-left:1em;padding-top:26pt;padding-right:1.8em;list-style:none;}.tabs .tabname:before {font-size:50%;width:1.5em;display:inline-block;margin-left:-1.5em;vertical-align:middle;}.tabs .nav .tabname:before {content:"\25BA"}.tabs .tabname {list-style:none;transition:color 0.25s ease;color:#777;cursor:pointer;}.tabs .tabname:hover {color:#ccc;}.tabs .tabname.current {color:#fff;cursor:inherit;}.tabs .tabname.disabled {color:#222;cursor:inherit;}/** Navigation elements specific to small screen*/.tabs .main > .tabname {display:none;}@media (max-width:660px) {/** Remove the navigation elements specific to large screen*/.tabs .nav {display:none;}.tabs .content > h2 {display:none;}/** Visual elements used for smalls creen*//* Extra margin for the :before content */.tabs > .main {margin-left:0.5em;}.tabs > .main > .tabname {display:block;}.tabs > .main > .tabname:before {content:"\25BA";}.tabs > .main > .tabname.current:before {content:"\25BC";}/** We hide the actual header when on a small screen.* But the zero-sized element still pushes the margins either* side,and we end up with a double-sized space.** A hack prevents this specific case.*/.tabs .content > h2:first-child + p {margin-top:0;}}</style><meta name="viewport" content="width=device-width, initial-scale=1.0"> <script type="text/javascript">var g;function aa(a){h("Creating bus");p();this.c=a;this.Ob=null;this.Hb=this.c.createGain();this.qa=this.c.createGain();this.Xa=this.c.createGain();this.qa.connect(this.Xa);this.yb=this.c.createGain();this.Xa.connect(this.yb);this.Hb.connect(this.yb);this.$c=this.c.createBufferSource();this.$c.loop=!0;this.$c.connect(this.qa);this.$c.start();this.ad=this.c.createStereoPanner();this.ad.pan.value=-1;this.Xa.connect(this.ad);this.bd=this.c.createStereoPanner();this.bd.pan.value=1;this.Hb.connect(this.bd);
this.Jb=this.c.createGain();this.Jb.gain.value=1/this.Jb.channelCount;this.ad.connect(this.Jb);this.bd.connect(this.Jb);this.Dd=this.c.createMediaStreamDestination();this.qa.connect(this.Dd);this.Ba=new r;this.Ba.ba(this.Dd.stream)}aa.prototype.b=function(){t()};
aa.prototype.ld=function(a,b,c){var d;switch(b){case "music":case "max-stereo":b=2;break;default:b=1}switch(a){case "me":d=this.Xa;break;case "you":d=this.Hb;break;case "everyone":d=this.yb;break;case "split":d=this.Jb;b=2;break;default:t()}return new ca(this.c,d,b,c)};
function da(a){h("Connecting to the bus");this.Ia=a.yb;this.Cb=a.c.createMediaStreamDestination();a.yb.connect(this.Cb);this.wb=a.c.createGain();this.wb.gain.value=-1;this.wb.connect(this.Cb);this.B=new ea(a.c);this.B.va.connect(a.Hb);this.B.va.connect(this.wb);this.Ba=new r;this.Ba.Z(!1)}g=da.prototype;g.b=function(){this.Ia.disconnect(this.Cb);this.Ia=null;this.wb.disconnect(this.Cb);this.wb=null;this.B.b();this.B=null;this.Ba.b();this.Ba=null};
g.ba=function(a){h("Receiving a stream on this channel");this.B.ba(a);this.Ba.ba(a)};g.Z=function(a){this.B.Z(a);this.Ba.Z(a)};g.ib=function(a){this.B.ib(a);this.Ba.ib(a)};g.send=function(){return this.Cb.stream};function fa(a){h("Connecting local channel to the bus");this.B=new ea(a.c);this.B.va.connect(a.Xa)}fa.prototype.b=function(){this.B.b()};fa.prototype.ba=function(a){h("Receiving a stream on a local channel");this.B.ba(a)};function p(){if(navigator.userAgent.match(/Edge\//))return null;var a=navigator.userAgent.match(/Chrome\/(\d*)/);return null===a?null:parseInt(a[1])}function ga(){if(navigator.userAgent.match(/Chrome\//))return null;var a=navigator.userAgent.match(/Safari\/(\d*)/);return null===a?null:parseInt(a[1])};function ha(a,b){h("Creating configuration manager");this.fa=a;var c;a:{h("Cookie contains: "+document.cookie);if(document.cookie){c=document.cookie.split(";");for(var d in c){var e=c[d].split("="),f=e[1].trim();if(e[0].trim()==this.fa){c=JSON.parse(atob(f));break a}}}c=null}this.ca=c;null===this.ca?(this.jb=b,this.uc=null,this.ca={}):(this.jb=null,this.uc=!0);this.A=!1;this.Lb=null;h("Got configuration: "+JSON.stringify(this.ca))}
ha.prototype.b=function(){this.ca=this.jb=this.fa=null;null===this.Lb||clearTimeout(this.Lb)};function ia(a){function b(a){h("Got confirmation of cookie use");a&&(this.Na(),this.jb=null);this.uc=a;this.A=!1}h("Synchronising persistent cookie");a.A||(a.A=!0,a.jb?(h("Approval required"),a.jb().then(b.bind(a))):b.bind(a)(a.uc))}ha.prototype.o=function(){u("Storing cookie");var a=JSON.stringify(this.ca);h("Saving cookie: "+a);document.cookie=this.fa+"="+btoa(a)+"; Expires=Tue, 1 Jan 2030 00:00:00 GMT"};
ha.prototype.Na=function(){function a(){this.o();this.Lb=null}null===this.Lb&&(this.Lb=setTimeout(a.bind(this),3E3))};function ja(a,b){this.Oa=a;this.fa=b}ja.prototype.set=function(a){h(this.fa+": setting value");if(null===a){if(!(this.fa in this.Oa.ca))return;delete this.Oa.ca[this.fa]}else{if(a===this.Oa.ca[this.fa])return;this.Oa.ca[this.fa]=a}ia(this.Oa)};ja.prototype.clear=function(){this.set(null)};ja.prototype.get=function(){return this.fa in this.Oa.ca?this.Oa.ca[this.fa]:null};function ka(){u("Displaying cookie notification");w("We've used a cookie to retain your settings between sessions; continuing to use Cleanfeed shows us you agree to this.");return new Promise(function(a){a(!0)})};var la;function ma(){}var na=ma,oa=ma,pa=ma,h=ma;function u(a){console.log(a);na(a)}function x(a){var b=p(),c=ga();console.trace(a);la=a;var d=Error().stack,d=d.replace(/\s+/g," "),e=["***"];b&&e.push(b.toString());c&&(e.push("safari"),e.push(c.toString()));a=e.join("-")+" "+a+"; "+d;oa(a)}function t(){pa();throw Error("");}function qa(){}function y(a,b){a.splice(a.indexOf(b),1)}
function ra(a,b,c,d){void 0===d&&(d=null);null===a&&(a={});"object"!=typeof a&&(a={});if(!(c in a))return d;a=a[c];return typeof a!=b?d:a}function sa(a){var b={},c=window.location.search.substring(1).split("&"),d;for(d in c){var e=c[d].split("=");1==e.length?a&&(b[a]=e[0]):b[e[0]]=e[1]}return b};function ta(){this.qd=3988292384;this.jc=this.Yb=null}function z(a,b,c){if(!a.Yb){a.Yb=new Uint32Array(256);for(var d=0;256>d;d++){for(var e=d,f=0;8>f;f++)e=0!=(e&1)?a.qd^e>>>1:e>>>1;a.Yb[d]=e}}return(b>>>8^a.Yb[(b^c)&255])>>>0}ta.prototype.rev=function(a,b){if(!this.jc){this.jc=new Uint32Array(256);for(var c=0;256>c;c++){for(var d=c<<24,e=0;8>e;e++)d=0!=(d&2147483648)?(d^this.qd)<<1|1:d<<1;this.jc[c]=d}}return(a<<8^this.jc[a>>>24]^b)>>>0};
function ua(a){for(var b=va,c=new DataView(a),d=4294967295,e=0;44>e;e++)d=z(b,d,c.getUint8(e));h("CRC state after forward fix is "+d.toString(16));c.setUint32(44,d,!0);d=4294967295;for(a=a.byteLength-1;44<=a;a--)d=b.rev(d,c.getUint8(a));h("CRC state after reverse fix is "+d.toString(16));c.setUint32(44,d,!0)}function wa(a){for(var b=va,c=new DataView(a),d=4294967295,e=0;e<a.byteLength;e++)d=z(b,d,c.getUint8(e));return d}var va=new ta;var RTCPeerConnection=window.RTCPeerConnection||window.webkitRTCPeerConnection,RTCSessionDescription=window.RTCSessionDescription||window.Oe,RTCIceCandidate=window.RTCIceCandidate||window.Ne,xa=!1;
function ya(a,b,c,d,e,f,k,l){h("Creating new connection");var m=p();this.Rc=e;this.Ab=f;this.Bb=k;if(m&&62>m)for(var n in c)e=c[n],"urls"in e&&(e.url=e.urls,delete e.urls);this.m=new RTCPeerConnection(c);this.m.onicecandidate=this.fe.bind(this);m&&64>m?this.m.onaddstream=this.re.bind(this):this.m.ontrack=this.se.bind(this);this.Mc=b;this.Da=d;this.Uc=[];this.yd=!1;this.Eb=null;m&&64>m?this.m.addStream(a):(a.getTracks(),this.m.addTrack(a.getTracks()[0],a));za(this,l);this.Mc&&this.nb()}g=ya.prototype;
g.b=function(){this.u("Shutting down");var a=p();this.G&&(clearTimeout(this.G),this.G=null);this.m.close();this.m.onicecandidate=null;a&&64>a?this.m.onaddstream=null:this.m.ontrack=null;this.Uc=this.Da=this.Mc=this.m=null;this.Eb&&(clearTimeout(this.Eb),this.Eb=null);this.Bb=this.Ab=this.Rc=null};g.bb=function(a){this.Ab(a)};g.u=function(a){this.Bb(a)};
g.fe=function(a){null===a.candidate?this.u("All transports have finished gathering ICE candidates"):(""==a.candidate.candidate?this.u("End of a generation of ICE candidates"):this.u("ICE candidate: "+a.candidate.candidate),this.bb({ice_event:a.candidate}))};
g.nb=function(){this.u("Creating SDP offer");this.m.createOffer(function(a){this.u("Configuring this end with the SDP offer");var b,c;switch(this.Da){case "talkback":b=24;c=!1;break;case "music":b=128;c=!0;break;case "max-mono":b=256;c=!1;break;case "max-stereo":b=320;c=!0;break;default:b=64,c=!1}a=Aa(a,b,c);this.m.setLocalDescription(a,function(){this.u("Calling the other party");this.bb({offer:{sdp:a,bitrate:b,stereo:c}})}.bind(this),x)}.bind(this),x)};
function Ba(a){for(var b=a.Uc;0<b.length;){var c=b.shift();a.m.addIceCandidate(c)}}function Ca(a,b,c){var d=p();b=new RTCSessionDescription(b);d?a.m.setRemoteDescription(b,c,x):a.m.setRemoteDescription(b).then(c);a.yd=!0;Ba(a)}g.Sa=function(a){if("ice_event"in a){var b=new RTCIceCandidate(a.ice_event);this.Uc.push(b);this.yd&&Ba(this)}"offer"in a&&(this.u("Offer received"),Da(this,a.offer));"answer"in a&&(this.u("Answer received"),Ea(this,a.answer))};
function Da(a,b){h("Answering");var c=p();Ca(a,b.sdp,function(){function a(d){function f(){this.u("Sending our SDP answer to the caller");this.bb({answer:d})}this.u("Setting local SDP");d=Aa(d,b.bitrate,b.stereo);c?this.m.setLocalDescription(d,f.bind(this),x):this.m.setLocalDescription(d).then(f.bind(this))}c?this.m.createAnswer(a.bind(this),x):this.m.createAnswer().then(a.bind(this))}.bind(a))}function Ea(a,b){Ca(a,b,function(){this.u("Handshake complete")}.bind(a))}
g.re=function(a){h("Remote is here (via ontrack)");Fa(this,a.stream)};g.se=function(a){h("Remote is here (via track)");Fa(this,a.streams[0])};
function Fa(a,b){function c(){h("Polling for flowing stream");this.m.getStats(function(a){if(this.m){a=a.result();for(var e=0;e<a.length;e++){var f=a[e],k=f.stat("bytesReceived");if(!(!k||512>k||!(f=f.stat("bytesSent"))||512>f)){this.u("Found data flowing");this.Rc(b,this.m);return}}this.Eb=setTimeout(c.bind(this),200)}}.bind(this))}a.u("Remote stream is here");null===p()?a.Rc(b,a.m):a.Eb=setTimeout(c.bind(a),200)}
function za(a,b){function c(){m?this.m.getStats(d.bind(this,f)):n?d.call(this,k,null):this.m.getStats().then(d.bind(this,k))}function d(a,d){function e(a){return null===a?"-":Math.round(a/1024)}if(this.m){var f=a(d),k=null===q.pa?null:1E3*q.pa;null===k||f.push("Inbound stream "+(0==k?"not present":12288>k?"is insufficient":"present"));xa&&f.push(e(null===q.pa?null:1E3*q.pa)+"/"+e(null===v.pa?null:1E3*v.pa)+"bps in/out");f.push(l.call(this).join(" "));b(f.join("\n"));this.G=setTimeout(c.bind(this),
500)}}function e(a,b){Ga(q,null===a?null:8*a);Ga(v,null===b?null:8*b)}function f(a){function b(a,c,d){return(a=a.stat(c))?a:d}function c(a){if(null===a)return null;a=parseInt(a);return isNaN(a)?null:a}function d(a){return null===a?"-":a}a=a.result();for(var f=null,k=null,l=null,m=null,n=null,v=null,q=null,eb=null,fb=0;fb<a.length;fb++){var L=a[fb],f=b(L,"googRemoteAddress",f),k=b(L,"googTransportType",k),n=b(L,"googLocalCandidateType",n),v=b(L,"googRemoteCandidateType",v),l=b(L,"googJitterReceived",
l);"true"==L.stat("googActiveConnection")&&(m=b(L,"googRtt",m),q=b(L,"bytesReceived",q),eb=b(L,"bytesSent",eb))}l=c(l);m=c(m);e(c(q),c(eb));return[d(f)+" "+d(k)+"/"+d(n)+"/"+d(v),d(m)+"ms network round trip",d(l)+"ms jitter delay inbound"]}function k(){return[]}function l(){var a=[];this.Da&&a.push(this.Da);this.Mc&&a.push("caller");return a}var m=p(),n=ga(),v=new Counter,q=new Counter;b("...");c.call(a)}function Counter(){this.pa=this.Mb=this.fb=null}
function Ga(a,b){var c=Date.now();null===a.fb||null===b?(a.fb=b,a.Mb=c,a.pa=null):b<a.fb||c<a.Mb?(a.fb=b,a.Mb=c,a.pa=null):(a.pa=(b-a.fb)/(c-a.Mb),a.fb=b,a.Mb=c)};var AudioContext=window.AudioContext||window.webkitAudioContext;function Ha(){var a=p();this.tb=this.Kb=this.f=null;a&&66>a&&(this.f=Ia(),document.body.appendChild(this.f),this.f.autoplay=!0,this.f.muted=!0,this.X=null);this.kd=function(){};this.jd=function(){}}Ha.prototype.b=function(){this.close();this.tb=null;this.f&&(this.f.parentNode.removeChild(this.f),this.f=null);this.jd=this.kd=null};
Ha.prototype.close=function(){this.X?(this.f.src="",this.f.load(),URL.revokeObjectURL(this.X),this.X=null):this.f&&(this.f.srcObject=null,this.f.load());if(this.Kb){var a=this.Kb.getTracks()[0];a.stop();this.Kb.removeTrack(a);this.Kb=null}};
Ha.prototype.open=function(a,b){var c={audio:{echoCancellation:b},video:!1},d=p();a&&(c.audio.deviceId=a);d&&62>d&&(c.audio={echoCancellation:{exact:b}},a&&(c.audio.deviceId={exact:a}));d&&54>d&&(c.audio={mandatory:{echoCancellation:b}},a&&(c.audio.mandatory.deviceId=a));d&&38>d&&(h("Browser may limit audio to single channel"),delete c.audio.mandatory.echoCancellation);d&&50>d&&(h("Adapting audio processing for Chrome 49 and earlier"),c.audio.mandatory.googAutoGainControl2=!1,c.audio.mandatory.googNoiseSuppression=
!1,c.audio.mandatory.googAutoGainControl=!1,c.audio.mandatory.googHighpassFilter=!1,c.audio.mandatory.googEchoCancellation=!1);this.tb=c;setTimeout(function(a){function b(a,c){h("getUserMedia returned with a stream");l.na();a==this.tb&&(Ja(Ka),this.f&&(d&&56>d?(this.X=URL.createObjectURL(c),this.f.src=this.X,h("Local audio given URL "+this.X)):this.f.srcObject=c,this.f.load(),d&&62>d&&this.f.play()),this.Kb=c,this.kd(c))}function c(a,b){h("getUserMedia returned with an error: "+b);l.na();if(a==this.tb){var d=
[];b.message&&d.push(b.message);b.name&&d.push("("+b.name+")");b.constraintName&&d.push("(constraint "+b.constraintName+")");d=d?d.join(" "):"No explaination given";switch(b.name){case "PermissionDeniedError":case "NotAllowedError":d="You've blocked your audio device",A("no-device",!1)}x(d);this.jd(d)}}if(a==this.tb){var l=new La(8E3,"Cleanfeed is paused, waiting for you. Please check at the top of the screen and 'allow' us to use your audio device or microphone.");d&&54>d?navigator.webkitGetUserMedia(a,
b.bind(this,a),c.bind(this,a)):navigator.mediaDevices.getUserMedia(a).then(b.bind(this,a))["catch"](c.bind(this,a))}}.bind(this,c),500)};var Ma=null;
function Na(){var a=p(),b=new AudioContext,c="";"baseLatency"in b&&.02>b.baseLatency&&(c=" preferred over "+b.baseLatency.toFixed(5),b.close(),b=new AudioContext({latencyHint:.02}));var d=""+b.sampleRate+"Hz";"baseLatency"in b&&(d+="/"+b.baseLatency.toFixed(5)+"s");u("Audio system at "+d+c);44100>b.sampleRate&&w("We've detected a poor quality audio device (eg. Bluetooth) could be impeding your audio. Remove these, and re-start your system",30);a&&48E3<b.sampleRate&&w("Your audio device is set to "+
(b.sampleRate/1E3).toFixed(1)+"kHz, which can cause silence to be heard by remote parties. Switch it to 48kHz or 44.1kHz, and re-start Cleanfeed",30);return b}function Oa(){var a=Na();return new Promise(function(b,c){var d=p();if(ga()||d&&74>d)return b(a);a.audioWorklet.addModule("awp.wk.js").then(function(){b(a)})["catch"](c)})}function Ia(){var a=document.createElement("audio");null===Ma||Pa(a,Ma);return a}
function Qa(a){Ma=a;var b=document.getElementsByTagName("audio");h("Setting master device on "+b.length+" elements: "+a);for(var c=0;c<b.length;c++)Pa(b[c],a)}function Pa(a,b,c,d){c||(c=function(){});d||(d=function(){});"setSinkId"in a?a.setSinkId(b).then(c.bind(b))["catch"](d.bind(b)):setTimeout(c(b),0)};function Ra(){this.mc=[];this.A=!1;this.w=null}function Ja(a){function b(a){this.A=!1;this.w=a;for(var b in this.mc)Sa(this.mc[b],this.w)}a.A||(u("Scanning for audio devices"),a.A=!0,navigator.mediaDevices.enumerateDevices().then(b.bind(a)))}Ra.prototype.current=function(){return this.w};var Ka=new Ra;
function Ta(a,b,c,d){for(h("Initialising device selection, preferred "+d);0<a.options.length;)a.options.remove(0);var e=document.createElement("option");e.textContent="...";e.disabled=!0;a.options.add(e);a.oninput=B(a.oninput,this.Ae.bind(this));this.Ea=a;this.zb=c;this.Vb=b;this.fc=d;this.Ed=void 0;a=Ka;a.mc.push(this);null===a.w?Ja(a):Sa(this,a.w)}Ta.prototype.b=function(){this.zb=this.Ea=null;y(Ka.mc,this)};
function Sa(a,b){function c(a,b,c){var e=document.createElement("option");if("Default"==a||""==a&&"default"==b)a="Use system default";""==a&&(a="Device "+b.substring(0,6));a=a.replace(/ \(Built-in\)/i,"");a=a.replace(/ \([0-9a-f]{4}:[0-9a-f]{4}\)/,"");e.textContent=a;null===b?e.value="":e.value=b;b==c&&(e.selected=!0);d.options.add(e)}h("Received list of devices for "+(a.Vb?"capture":"playback"));for(var d=a.Ea;0<d.options.length;)d.options.remove(0);a.Vb&&c("Use browser setting",null,a.fc);for(var e in b){var f=
b[e];f.kind==(a.Vb?"audioinput":"audiooutput")&&(a.Vb&&"default"==f.deviceId||c(f.label,f.deviceId,a.fc))}a.Ua(!1)}Ta.prototype.Ae=function(){this.fc=this.Ua(!0);h("User selected "+this.fc)};
Ta.prototype.Ua=function(a){h("Commit device");var b=null,c;if(0<=this.Ea.selectedIndex){var d=this.Ea[this.Ea.selectedIndex];c=d.textContent;u("Selected device: "+c);""===d.value?b=null:b=d.value}if(b===this.Ed)h("This commit does not change the device");else return h("Notifying change to device "+b+(a?" explicitly selected":"")),this.zb(b,c,a),this.Ed=b};window.rescan=function(){Ja(Ka)};function Ua(a){document.getElementById(a).style.visibility="inherit";Va()}function Va(){setTimeout(function(){document.getElementById("intro").style.visibility="hidden"},50)}function Wa(a){a.style.transition="0.5s";a.style.transform="translateY("+window.innerHeight+"px)";a.style.webkitTransform=a.style.transform;a.style.visibility="hidden"};function Xa(a,b,c,d,e){this.a=a;this.i=d;a=this.a.getElementsByClassName("toggle")[0];a.onclick=B(a.onclick,this.fd.bind(this));a=this.a.getElementsByClassName("button")[0];a.onclick=B(a.onclick,Ya.bind(null,a,this.a.getElementsByClassName("popout")[0]));this.za=new Ha;this.za.kd=this.xe.bind(this);this.za.jd=this.Ka.bind(this);this.sd=!1;this.zd=this.ud=this.Ja=null;this.Y=function(){};this.Od=function(){};this.Ka=null;this.Gb=!1;this.ia=new fa(e);this.S=null;this.I=ra(c,"boolean","on",b);this.ia.B.Z(this.I);
this.o();if(this.V=this.a.querySelector("select.mode"))this.V.onchange=this.Zc.bind(this),this.V.value=ra(c,"string","split","s");if(this.D=this.a.querySelector("select.gain"))this.D.onchange=this.ab.bind(this),this.D.value=ra(c,"string","gain",0),this.md(this.D.value);b=ra(c,"string","device",null);this.Id=new Ta(this.a.querySelector("select.device"),!0,this.ve.bind(this),b);h("Local source created")}g=Xa.prototype;
g.b=function(){this.V=this.V.onchange=null;Za(this);this.ia.b();this.Ja=this.Od=this.Y=this.Gb=this.Ka=this.ia=null;this.Id.b();this.Id=null;this.za.b();this.za=null;h("Local source destroyed")};function Za(a){p();a.Gb&&(a.S.b(),a.S=null,a.za.close(),a.ia.ba(null),a.Gb=!1)}g.ve=function(a,b,c){h("Chosen capture device: "+a);this.Ja=a;this.sd=!0;this.Od(c);$a(this);c&&this.Y()};g.Zc=function(){h("Chosen audio mode: "+this.V.value);$a(this);this.Y()};g.mode=function(){return this.V.value};
g.ab=function(){var a=this.gain();h("Chosen gain: "+a);this.ia.B.md(a);this.Y()};g.md=function(a){this.D.value=a;this.ab()};g.gain=function(){return Number(this.D.value)};function $a(a){if(a.sd){var b=a.V.value,c,d=!1;"e"==b?(c="s",d=!0):(c=b,d=!1);b=a.ia.B;c!=b.nc&&(ab(b),b.nc=c,bb(b));if(d!=a.ud||a.Ja!=a.zd)a.zd=a.Ja,a.ud=d,Za(a),a.Ka=null,a.za.open(a.Ja,d),a.o()}}
g.xe=function(a){Za(this);a&&(u("Local device stream is ready"),this.ia.ba(a),a=this.ia.B,this.S=new cb(a.c,a.Ga,this.a.getElementsByClassName("meter")[0]),this.Gb=!0);this.o()};g.Ka=function(a){Za(this);this.Ka=a;this.o()};
g.o=function(){var a="waiting",b="#333",c="Preparing audio source";this.Gb&&(a="live",c="Ready");this.I?b="#27ae60":c="Muted";this.Ka&&(a="warning",c=this.Ka,this.I&&(b="#d90"));var d=this.a.getElementsByClassName("indicator")[0];d.style.backgroundColor=b;d=this.a.getElementsByTagName("img")[0];C(d,a);d=this.a.getElementsByClassName("name")[0];d.textContent=this.i;d=this.a.getElementsByClassName("status")[0];d.textContent=c};
g.fd=function(){var a=!!this.I;a?u("Mute ourselves"):u("Unmute ourselves");this.I=!a;this.ia.B.Z(this.I);this.o();this.Y()};function db(a){var b={};null!==a.Ja&&(b.device=a.Ja);a.I&&(b.on=!0);var c=a.mode();"s"!=c&&(b.split=c);a=a.D.value;"0"!=a&&(b.gain=a);return b}g.nd=function(a){this.i=a;this.o()};g.Ha=function(a,b,c){return a.connect(b,c,this.ia.B.va)};function gb(a,b,c,d,e){var f=D(a.getElementsByClassName("template")[0]);a.appendChild(f);Xa.call(this,f,b,c,d,e)}gb.prototype=Object.create(Xa.prototype);
gb.prototype.b=function(){Xa.prototype.b.call(this);this.a.parentNode.removeChild(this.a);this.a=null;h("DynamicLocalSource destroyed")};function ea(a){this.c=a;this.g=null;this.nc="s";this.cd=1;this.I=!0;this.D=1;this.ta=a.createChannelSplitter(2);this.Ga=a.createGain();this.va=a.createGain();this.Ga.connect(this.va)}g=ea.prototype;g.b=function(){ab(this);this.ta=this.g=null;this.Ga.disconnect();this.Ga=null;this.va.disconnect();this.va=null};g.ba=function(a){h("Connecting stream to the preprocssor");ab(this);a?this.g=this.c.createMediaStreamSource(a):this.g=null;bb(this)};
g.Z=function(a){a=(this.I=a)?1:0;h("Fader gain is "+a);this.va.gain.setTargetAtTime(a,0,.01)};g.md=function(a){this.ib(Math.pow(10,a/10))};g.ib=function(a){this.D=a;hb(this)};function ab(a){a.g&&(h("Preamp unwiring"),a.g.disconnect(),a.ta.disconnect())}
function bb(a){if(null!==a.g){h("Preamp wiring");if("s"==a.nc)h("Connecting source directly to fader"),a.g.connect(a.Ga),a.cd=1;else{var b;switch(a.nc){case "l":b=[0];break;case "r":b=[1];break;case "m":b=[0,1]}a.g.connect(a.ta);for(var c in b)a.ta.connect(a.Ga,b[c]);a.cd=1/b.length}hb(a)}}function hb(a){var b=a.D*a.cd;h("Prefader gain is "+b);a.Ga.gain.value=b};var ib=null;function jb(a,b){var c=document.createElement("a");c.href=URL.createObjectURL(a);c.download=b;document.body.appendChild(c);c.click();c.parentNode.removeChild(c);URL.revokeObjectURL(c.href)}
function ca(a,b,c,d){var e=p();this.g=b;this.U=c;this.La=d;this.H=0;this.ja=null;this.Ac=1;this.lc=0;this.aa=new kb;this.T=!1;this.F=a.createScriptProcessor(16384,c,1);b.connect(this.F);this.la=new lb(a.sampleRate,this.F.bufferSize);this.F.onaudioprocess=function(a){if(!this.T){for(var b=[],c=0;c<this.U;c++)b.push(a.inputBuffer.getChannelData(c));a=mb(this.la,b,this.aa);this.H+=a;this.lc+=a}}.bind(this);this.F.connect(a.destination);this.zc=null;e&&58>e&&(this.zc=setInterval(this.Ge.bind(this),18E5),
null===ib&&(ib=new E("You're using an older browser, which requires us to start a new recording at 30 minute intervals. Please update your browser.",120)));this.qc=null;nb(this)}g=ca.prototype;g.start=function(){this.T=!1};g.stop=function(){this.T=!0};
g.b=function(){this.g.disconnect(this.F);this.g=null;this.F.onaudioprocess=null;this.F.disconnect();this.F=null;null===this.zc||clearInterval(this.zc);this.G&&(clearInterval(this.G),this.ja=this.G=null);null===this.qc||this.qc.na();this.aa.b();this.aa=null};g.source=function(){return this.g};g.Ge=function(){h("Checkpoint");this.Na(!1);this.Ac++;this.lc=0;this.aa.b();this.aa=new kb};
function nb(a){a.qc=new La(9E5,"Recordings are held in your browser's memory. You can download the recording at any convenient time \u2014 recommended for long recordings.",120)}g.Na=function(a){var b;a&&1==this.Ac?b=this.La:b=this.La+" part "+this.Ac;a=this.la.Pa;var c=this.lc,d=ob(this.aa,a,this.U,c);jb(d.blob,b+".wav");w("Downloading "+pb(c/a)+" recording '"+b+"'")};g.save=function(){this.Na(!0);this.qc.na();nb(this)};g.oa=function(){this.ja(pb(this.H/this.la.Pa))};
function qb(a,b,c){function d(){this.ja(pb(this.H/this.la.Pa))}this.c=a;this.La=b;this.H=0;this.T=!1;this.Tc=null;this.K=[];this.F=this.c.createScriptProcessor(16384,32,1);this.la=new lb(this.c.sampleRate,this.F.bufferSize);this.F.onaudioprocess=this.Fb.bind(this);this.F.connect(this.c.destination);this.ac=this.c.createChannelMerger(this.F.channelCount);this.ac.connect(this.F);this.lb=[];for(a=0;a<this.F.channelCount;a++)this.lb.unshift(a);this.ja=c;this.G=setInterval(d.bind(this),500);d.call(this)}
g=qb.prototype;g.b=function(){clearInterval(this.G);this.ja=this.G=null;this.ac.disconnect();this.ac=null;this.F.onaudioprocess=null;this.F.disconnect();this.F=null;for(var a in this.K)this.K[a].b();this.K=null};g.start=function(){this.T=!1;this.Tc=null};g.stop=function(){this.T=!0;this.Tc=new Date};g.Fb=function(a){if(!this.T){for(var b in this.K){var c=this.K[b],d=[],e;for(e in c.U)d.push(a.inputBuffer.getChannelData(c.U[e]));mb(this.la,d,c.R)}this.H+=this.la.ed}};
g.download=function(){var a=this.T?this.Tc:new Date,b=new rb,c;for(c in this.K){var d=this.K[c],e=d.file(),f=b,k=e.blob,d=d.i+".wav",e=e.hb,l=a;void 0===l&&(l=new Date);f.Wa.push({blob:k,length:k.size,filename:d,hb:e,Qd:l})}jb(b.blob(),this.La+".zip");w("Downloading all of "+pb(this.H/this.la.Pa)+" recording '"+this.La+"'")};
function sb(a,b,c){this.O=a;this.i=c;this.R=new kb;this.ta=this.O.c.createChannelSplitter(b);this.U=[];for(a=0;a<b;a++)c=this.O.lb.pop(),this.ta.connect(this.O.ac,a,c),this.U.push(c);this.v=this.O.c.createGain();this.v.channelCount=b;this.v.channelCountMode="explicit";this.v.connect(this.ta);this.O.K.push(this)}sb.prototype.b=function(){this.O.lb=this.O.lb.concat(this.U);y(this.O.K,this);this.v.disconnect();this.v=null;this.ta.disconnect();this.ta=null;this.R.b();this.O=this.i=this.U=this.R=null};
sb.prototype.file=function(){return ob(this.R,this.O.la.Pa,this.U.length,this.O.H)};sb.prototype.download=function(){var a=this.O.La+": "+this.i,b=this.file();jb(b.blob,a+".wav");w("Downloading "+pb(this.O.H/this.O.la.Pa)+" track '"+this.i+"' from recording '"+this.O.La+"'")};sb.prototype.node=function(){return this.v};var tb=!1,G,ub;function vb(){function a(a){G.send({type:"LOG",message:a})}window.rpc?(h("Inheriting socket from our opener"),G=window.socket,ub=window.rpc):(h("Opening new socket"),G=new wb,ub=new xb(G));oa=na=a}function yb(a,b){G.send({type:"FWD",dest:b,"package":a})}function H(a,b,c){ub.call(a,b,c)}
function zb(){var a=G;a.Pd=function(){h("Disconnected from server");tb||A("disconnected",!1)};I(a,"MESSAGE",function(a){w(a.message)});I(a,"WELCOME",function(a){Ab=a.key;Bb(a)});I(a,"REJECT",function(a){u(a.reason);J(a.reason)});I(a,"KICK",function(a){u("Connection terminated by server");tb=a=a.reason;"STOLEN"==a?A("stolen",!0):(document.getElementById("hup-text").textContent=a,A("hup",!0))})};function wb(){h("Initialising our Socket object");var a="wss://";"http:"==document.location.protocol&&(a="ws://");this.Fa=null;this.gc=[];this.Kc={};this.ub=[];this.Ec=!1;setTimeout(function(){h("Opening WebSocket connection");var b=new WebSocket(a+document.location.host+"/peer");b.onopen=this.je.bind(this);b.onclose=this.Gd.bind(this);b.onmessage=this.cc.bind(this);this.Fa=b}.bind(this),1E3)}function I(a,b,c){a.Kc[b]=c}wb.prototype.send=function(a){this.gc.push(a);this.da&&Cb(this)};
wb.prototype.je=function(){this.da=!0;this.Ke&&this.Ke();Cb(this)};wb.prototype.Gd=function(){this.Pd&&this.Pd();this.da=!1;this.gc=[];this.ub=[]};function Cb(a){for(;0<a.gc.length;){var b=a.gc.shift(),b=JSON.stringify(b);h("Sending message: "+b);a.Fa.send(b)}}wb.prototype.cc=function(a){a=JSON.parse(a.data);h("Received message: "+JSON.stringify(a));this.ub.push(a);Db(this)};function Eb(){var a=G;h("Corking socket");a.Ec=!0}
function Db(a){for(;!a.Ec&&0<a.ub.length;){var b=a.ub.shift();"type"in b||(x("Bad protocol: no message type"),t());var c=b.type,d=a.Kc[c];d||(x("Bad protocol: unexpected message "+c),t());d(b)}}function xb(a){a.Kc.REPL=this.pe.bind(this);this.Fa=a;this.A={};this.Fe=48879}xb.prototype.call=function(a,b,c){var d=this.Fe++;b.type=a;b.xid=d;this.Fa.send(b);this.A[d]=c?c:null};xb.prototype.pe=function(a){var b=a.xid,c=this.A[b];delete this.A[b];delete a.type;delete a.xid;c&&c(a)};function Fb(a,b){this.hc=a;this.yc=b;this.h=null;this.Qb()}Fb.prototype.Qb=function(){this.we=new Date;var a=this.hc;h("Resuming timer with "+a+"ms remaining");this.h=setTimeout(this.Sd.bind(this),a)};Fb.prototype.pause=function(){clearTimeout(this.h);this.h=null;this.hc-=new Date-this.we};Fb.prototype.Sd=function(){this.yc();this.h=this.yc=null};Fb.prototype.b=function(){null===this.h||this.pause();this.hc=this.h=this.yc=null};function B(a,b){return a?function(c){a(c);b(c)}:b}function C(a,b){a.src="icon/"+b;var c={waiting:"Waiting",warning:"Warning",live:"",connected:""},d;b in c?d=c[b]:d=null;null===d?a.removeAttribute("alt"):a.setAttribute("alt",d)}
function K(a,b){if(b){var c=function(){a.style.maxHeight=a.scrollHeight+"px";a.Pb=setTimeout(function(){a.style.maxHeight=""},500)};a.Pb||(a.Sb&&(clearTimeout(a.Sb),a.Sb=null),a.classList.add("engaged"),a.style.maxHeight="0px",a.Pb=setTimeout(c,10))}else c=function(){a.style.maxHeight="0px";a.Sb=setTimeout(function(){a.classList.remove("engaged");a.style.maxHeight=""},500)},a.Sb||(a.Pb&&(clearTimeout(a.Pb),a.Pb=null),a.style.maxHeight=a.scrollHeight+"px",a.Sb=setTimeout(c,10))}
function Ya(a,b){b.classList.contains("engaged")?(K(b,!1),a.classList.remove("engaged")):(K(b,!0),a.classList.add("engaged"))}function M(a,b){var c=a.getElementsByTagName("p")[0];c||(c=document.createElement("p"),a.appendChild(c));c.textContent=b;K(a,!0)}function Gb(a,b){a.textContent=b}
function Hb(){var a=document.createElement("div");a.innerHTML='\n        Multitrack recording is beta. This means it is subject\n        to change, and <em>not ready for important recordings</em>; please\n        see <a href="/faq">our FAQ</a>. It\'s provided for testing\n        and feedback only, and when it\'s ready will be part of\n        Cleanfeed&nbsp;Pro. Follow\n        <a href="https://blog.cleanfeed.net">the blog</a>\n        for information.\n    ';return a}
function D(a){a=a.cloneNode(!0);a.classList.remove("template");return a}function Ib(){for(var a=Jb,b=document.getElementsByClassName("alpha"),c=0;c<b.length;c++)b[c].hidden=!a}function pb(a){var b=Math.floor(a/60);a=Math.floor(a)%60;10>a&&(a="0"+a);return b+":"+a}function Kb(a){a=a.getElementsByTagName("iframe");for(var b=0;b<a.length;b++){var c=a[b];c.src=c.dataset.src}}
function Lb(a,b,c,d){var e=this.oe.bind(this),f=this.qe.bind(this);a.onmousedown=e;a.onmouseup=f;a.onmouseleave=f;a.ontouchstart=e;a.ontouchend=f;a.oncontextmenu=function(){return!1};null!==c&&(c="Press and hold to "+c,d&&(c+=". "+d),a.onclick=this.Zb.bind(this,c));this.l=a;this.od=b;this.bc=this.h=null}g=Lb.prototype;
g.b=function(){this.l.onmousedown=null;this.l.onmouseup=null;this.l.onmouseleave=null;this.l.ontouchstart=null;this.l.ontouchend=null;this.l.oncontextmenu=null;null!==this.h&&(clearTimeout(this.h),this.h=null);null!==this.bc&&(this.bc.na(),this.bc=null);this.od=this.l=null};g.oe=function(){null===this.h&&(h("Starting timer for press-and-hold"),this.h=setTimeout(this.Vd.bind(this),1E3))};g.qe=function(){null!==this.h&&(h("Aborting press-and-hold"),clearTimeout(this.h),this.h=null)};
g.Vd=function(){h("Actioning press-and-hold");this.h=null;this.od()};g.Zb=function(a){this.bc=new E(a)};function Mb(a,b){this.a=a;this.Ma=b;this.write("Starting log")}Mb.prototype.write=function(a){var b=document.createElement("div");b.textContent=a;this.a.appendChild(b);this.a.scrollTop=this.a.scrollHeight;this.Ma&&(a=this.Ma+": "+a);u(a)};
function N(a,b){this.Aa=a.getElementsByTagName("img")[0];a.onclick=B(a.onclick,b);this.l=a;var c=document.createElement("img");C(c,"waiting");c.classList.add("waiting");a.appendChild(c)}N.prototype.start=function(){this.l.classList.add("pending")};N.prototype.stop=function(){this.l.classList.remove("pending")};function Nb(a){this.C=a;this.h=null}Nb.prototype.b=function(){null!==this.h&&(this.h.b(),this.h=null)};
function Ob(a){a.C.classList.remove("disabled");a.h&&a.h.b();a.h=new Fb(45E3,function(){h("Too much time accumulated; button is now unsafe");this.C.classList.add("disabled");this.h.b();this.h=null}.bind(a))}Nb.prototype.pause=function(){this.h.pause()};Nb.prototype.Qb=function(){this.h.Qb()};function O(a,b){b?(a.classList.remove("disabled"),null===a.onclick&&(a.onclick=a.he)):(a.classList.add("disabled"),a.onclick&&(a.he=a.onclick,a.onclick=null))}function Pb(a){return(a=a.trim())&&""!=a?a.match(/^[0-9a-zA-Z_\-\+\.]+@[0-9a-zA-Z\-]+\.[0-9a-zA-Z\-\.]*[a-zA-Z]$/)?null:"Doesn't look like a valid email address":"Please enter an email address"}
function Qb(a){if(!a||""==a)return"Choose a new password";var b=!0;6>a.length&&(b=!1);a.match(/[A-Za-z]/)||(b=!1);a.match(/[0-9]/)||(b=!1);return b?a.match(/password|qwerty|cleanfeed/i)?"No easy passwords, please":null:"Must be 6 characters or more, with letters and numbers"}function Rb(a,b){return""==b?"Please provide the same password again":b!=a.value?"Try again; the passwords do not match":null}function Sb(a,b){return(b=b.trim())&&""!=b?null:"Please enter "+a}
function Tb(a,b){a.onreset=B(a.onreset,function(){setTimeout(b)})}function Ub(a){for(var b in a.options){var c=a.options[b];if("multi"==c.value)return c}t()}function P(a,b,c){this.rc=b;this.vc=!1;this.rb=null;this.v=a;if(c)this.P=c;else{a:for(;;){b=a.getElementsByClassName("alert");if(0<b.length){a=b[0];break a}a=a.parentNode;a===document.body&&t()}this.P=a}this.v.oninput=B(this.v.oninput,this.eval.bind(this,!1));this.v.onchange=B(this.v.onchange,this.eval.bind(this,!0))}
P.prototype.L=function(){return null===this.rc(this.v.value)?!0:!1};P.prototype.eval=function(a){function b(){M(this.P,c);this.vc=!0;this.v.classList.add("invalid")}if(this.P){var c=this.rc(this.v.value);c?a||this.vc?b.bind(this)():(this.rb&&clearTimeout(this.rb),this.rb=setTimeout(b.bind(this),2E3)):(K(this.P,!1),this.vc=!1,this.v.classList.remove("invalid"),clearTimeout(this.rb),this.rb=null)}};
function Q(a,b,c,d){this.C=a;this.Td=c;b.oninput=B(b.oninput,this.eval.bind(this));Tb(b,this.eval.bind(this));for(var e in d)d[e].onclick=this.eval.bind(this);this.eval()}Q.prototype.eval=function(){O(this.C,this.Td())};
function Wb(a,b,c){this.rc=b;this.Ua=c;this.ea=null;this.A=!1;this.v=a.getElementsByTagName("input")[0];this.C=a.getElementsByClassName("button")[0];this.Aa=this.C.getElementsByTagName("img")[0];this.v.oninput=B(this.v.oninput,this.o.bind(this));this.C.onclick=B(this.C.onclick,this.Hc.bind(this))}Wb.prototype.Rb=function(a){this.ea=a;this.v.value=a;this.o()};
Wb.prototype.o=function(){var a=this.v.value,b="plus";a===this.ea&&(b="circle-tick");this.A&&(b="waiting");var c=!0;this.rc(a)&&(c=!1);this.A&&(c=!1);a===this.ea&&(c=!1);C(this.Aa,b);O(this.C,c)};Wb.prototype.Hc=function(){this.A=!0;this.o();this.Ua(this.v.value,function(){this.A=!1;this.o()}.bind(this))};function Xb(a,b){this.ce=new P(a,Qb);this.ue=new P(b,Rb.bind(null,a));a.oninput=B(a.oninput,function(){b.value=""})}Xb.prototype.L=function(){return this.ce.L()&&this.ue.L()?!0:!1};
function Yb(a,b,c){a.oninput=B(a.oninput,this.oa.bind(this));this.Ea=a;this.Zb=c;this.Gc=b;this.oa()}Yb.prototype.Rb=function(a){this.ea=a;this.oa()};Yb.prototype.oa=function(){var a=this.Ea.options[this.Ea.selectedIndex],b=a.value;h("Synchronising list to item: "+a.value);a=a.title;b in this.Zb&&(a=this.Zb[b]);a?(a&&this.ea&&this.ea==b&&(a+=" This is the current setting."),this.Gc.textContent=a,this.Gc.hidden=!1):this.Gc.hidden=!0};
function Zb(a,b){a.onchange=this.oa.bind(this);a.form&&Tb(a.form,this.oa.bind(this));this.Ud=a;this.Xd=b;this.oa()}Zb.prototype.oa=function(){K(this.Xd,this.Ud.checked)};var $b=null,ac=[];function bc(a,b){function c(){for(var a in ac)ac[a].o();$b=window.requestAnimationFrame(c)}this.pc=this.gb=null;this.wa=[];for(var d=0;d<a;d++)this.wa[d]=new cc;b.width=b.clientWidth;b.height=b.clientHeight;this.Dc=b.getContext("2d");this.sc=b.width/a;this.Lc=b.height;ac.push(this);$b||c()}
bc.prototype.b=function(){y(ac,this);0==ac.length&&(window.cancelAnimationFrame($b),$b=null);this.Dc.clearRect(0,0,this.sc*this.wa.length,this.Lc);this.gb&&(this.gb.disconnect(),this.pc=this.gb=null);this.Lc=this.sc=this.Dc=this.wa=null};
bc.prototype.o=function(){for(var a=0,b=0;b<this.wa.length;b++){if(this.pc){var c=this.wa,d=b,e=this.pc,f=b,k=new cc;k.Ca=e.Ca[f];k.ya=e.ya[f];c[d]=k}var c=this.wa[b],d=this.Dc,e=a,f=this.sc,k=this.Lc,l=Math.log(Math.sqrt(c.Ca))/Math.LN10*20;-64>l&&(l=-64);var l=l/-64*k,m=.28125*k;d.fillStyle="#555";d.fillRect(e,0,f,l);l<m?(d.fillStyle=c.ya?"#d00":"#fe0",d.fillRect(e,l,f,m-l)):m=l;d.fillStyle=c.ya?"#d00":"#0d0";d.fillRect(e,m,f,k-m);a+=this.sc}};
function dc(a,b){var c=b.createScriptProcessor(1024,a.wa.length);c.onaudioprocess=function(a){for(var c=0;c<this.wa.length;c++)for(var f=a.inputBuffer.getChannelData(c),k=0;k<f.length;++k){var l=this.wa[c],m=f[k],n=b.sampleRate;0<l.ya&&l.ya--;m=m*m;.995<m&&(l.ya=.1*n);var v=void 0,n=m>l.Ca?480/n:3E-4*48E3/n,v=l.Ca*(1-n)+m*n;l.Ca=v}}.bind(a);return c}
function ec(a,b){a.gb=new AudioWorkletNode(b,"ginger");a.gb.port.onmessage=function(a){h("Received audio buffer from the audio thread");this.pc=new fc(a.data)}.bind(a);return a.gb}
function cb(a,b,c){var d=p(),e=ga(),f=b.channelCount;b instanceof ChannelMergerNode&&1==b.channelCount&&(h("Applying quirk for stereo channel merge nodes"),f=2);this.pb=new bc(f,c);c=e||d&&74>d?dc(this.pb,a):"SharedArrayBuffer"in window?ec(this.pb,a):dc(this.pb,a);b.connect(c);c.connect(a.destination);this.g=b;this.Fb=c}cb.prototype.b=function(){this.g.disconnect(this.Fb);this.g=null;this.Fb.disconnect();this.Fb.onaudioprocess=null;this.pb.b();this.pb=null};function r(){h("Creating monitor");p();this.f=Ia();document.body.appendChild(this.f);this.f.autoplay=!0}r.prototype.b=function(){this.ba(null);this.f.parentNode.removeChild(this.f);this.f=null};r.prototype.ba=function(a){var b=p();b&&65>b?(URL.revokeObjectURL(this.f.src),this.f.src=""):this.f.srcObject=null;this.f.load();null!==a&&(b&&65>b?this.f.src=URL.createObjectURL(a):this.f.srcObject=a,this.f.load(),this.f.play())};r.prototype.Z=function(a){this.f.muted=!a};
r.prototype.ib=function(a){this.f.volume=a};function w(a,b){new E(a,b)}
function E(a,b){function c(a){a.stopPropagation()}h("Creating a notification");var d=document.getElementById("notifications"),e=D(d.getElementsByClassName("template")[0]);e.onclick=E.prototype.na.bind(this);if("string"==typeof a)e.textContent=a;else if(a instanceof HTMLElement){for(var f=a.getElementsByTagName("a"),k=0;k<f.length;k++){var l=f[k];l.target="_new";l.onclick=c}e.appendChild(a)}else t();u(e.textContent);d.appendChild(e);this.l=e;void 0===b&&(b=12);b&&setTimeout(E.prototype.na.bind(this),1E3*
b)}E.prototype.na=function(){this.l&&(this.l.parentNode.removeChild(this.l),this.l=null)};function La(a,b,c){h("Deferring a notification");this.h=setTimeout(function(){this.h=null;this.Qc=new E(b,c)}.bind(this),a);this.Qc=null}La.prototype.na=function(){this.Qc?this.Qc.na():clearTimeout(this.h)};
function gc(a,b,c){h("Starting undo-able operation");this.Ua=a;this.te=b;a=document.getElementById("notifications");this.l=D(a.querySelector(".undoable.template"));a.appendChild(this.l);a=this.l.getElementsByClassName("message")[0];a.textContent=c;a=this.l.querySelector(".button");a.onclick=this.Zd.bind(this);this.Jd=setTimeout(this.Hc.bind(this),12E3)}gc.prototype.Hc=function(){h("Commit operation");this.Ua();hc(this)};gc.prototype.Zd=function(){h("Rollback operation");this.te();hc(this)};
function hc(a){clearTimeout(a.Jd);a.Jd=null;a.l.parentNode.removeChild(a.l);a.l=null};function A(a,b){h("Show overlay '"+a+"'");for(var c=document.getElementById("overlay"),d=document.getElementById(a),e=c.getElementsByClassName("content"),f,k=0;k<e.length;k++){var l=e[k];l.parentNode==c&&(l==d?f=l:l.style.display="none")}f.style.display="block";d=f.getElementsByTagName("input");0<d.length&&d[0].focus();document.getElementById("overlay-close").style.visibility=b?"hidden":"inherit";c.style.visibility="inherit"}
function ic(){document.getElementById("overlay").style.visibility="hidden"}function jc(){pa=function(){var a=document.querySelector("#bail .with-error");la?(a.hidden=!1,document.querySelector("#bail .tty").textContent=la):a.hidden=!0;A("bail",!1)}};function cc(){this.Ca=this.ya=0}function fc(a){var b=Float32Array.BYTES_PER_ELEMENT+Uint8Array.BYTES_PER_ELEMENT,c,d;a instanceof SharedArrayBuffer&&(c=a,d=c.byteLength/b);"number"==typeof a&&(d=a,c=new SharedArrayBuffer(d*b));this.R=a=c;this.U=d;d=this.U*Float32Array.BYTES_PER_ELEMENT;this.Ca=new Float32Array(a,0,this.U);this.ya=new Uint8Array(a,d,this.U)}fc.prototype.buffer=function(){return this.R};var Ab;
function kc(a){function b(a){var b={credential:"x",username:Ab};b.urls="turn:"+a;return b}function c(a,b){return{name:a,Ie:b}}h("Generating ICE servers from "+a.length+" relays: "+a);if(0==a.length)return[c("isolated",[])];var d=[],e=[{urls:"stun:"+a[0]},b(a[0])];1<a.length&&(e=e.concat([b(a[1])]));d.push(c("primary",e));e=[{urls:"stun:"+a[0]},b(a[0]+":443?transport=tcp")];d.push(c("proxy",e));if(3>a.length)return d;e=[{urls:"stun:"+a[2]}];a=a.slice(2);for(var f in a)e.push(b(a[f]));d.push(c("fallback",e));
h("Generated ICE server configuration "+JSON.stringify(d));return d}function lc(a,b,c,d){this.Sc=a;this.Ab=b;this.Bb=c;this.ja=d;this.Ta=null;this.da=!1;this.G=null;this.rd=!1}g=lc.prototype;g.b=function(){mc(this);this.ja=this.Bb=this.Ab=this.Sc=null;this.rd=!0};g.Sa=function(a){this.Ta&&this.Ta.Sa(a)};g.Wc=function(a,b,c){this.u("Returning connected stream: "+a);this.da=!0;this.Sc(b,c)};g.ge=function(a,b){this.u(a+": "+b)};g.bb=function(a){this.Ab(a)};g.u=function(a){this.Bb(a)};
function mc(a){null!==a.Ta&&(a.da&&(a.Sc(null,null),a.da=!1),a.G&&(clearTimeout(a.G),a.G=null),a.Ta.b(),a.Ta=null)}function nc(a,b,c,d,e,f,k){h("Creating new RTC primary");this.Bd=a;this.$a=b;this.Da=c;this.Za=this.ma=null;lc.call(this,d,e,f,k)}nc.prototype=Object.create(lc.prototype);g=nc.prototype;g.b=function(){this.ma&&(clearTimeout(this.ma),this.ma=null);this.$a=this.Bd=this.Za=null;lc.prototype.b.call(this)};
g.Sa=function(a){"reset"in a&&(this.u("Peer requested a reset"),mc(this));"up"in a&&(this.u("Peer is ready"),this.nb());lc.prototype.Sa.call(this,a)};function oc(a){a.u("Finding relays for this call");pc(a.$a,function(){if(!this.rd){this.u("Relays: "+this.$a.debug());var a=qc(this.$a),c=[],d;for(d in a)c.push(a[d].gd);this.Za=kc(c);this.nb()}}.bind(a))}
g.nb=function(){mc(this);null!==this.ma&&(clearTimeout(this.ma),this.ma=null);if(null===this.Za)oc(this);else if(0==this.Za.length)this.u("No more connection methods available");else{var a=this.Za[0];this.u("Initiating connection: "+a.name+" for "+this.Da);var b={iceServers:a.Ie};this.bb({attempt:{profile:a.name,rtc_config:b,quality:this.Da}});a=a.name;this.Ta=new ya(this.Bd,!0,b,this.Da,this.Wc.bind(this,a),this.bb.bind(this),this.ge.bind(this,a),this.ja);this.ma=setTimeout(this.Rd.bind(this),1E4)}};
g.Rd=function(){this.Za.shift();this.ma=null;this.nb()};g.Wc=function(){h("Removing the retry timer");clearTimeout(this.ma);this.ma=null;lc.prototype.Wc.apply(this,arguments)};
function Aa(a,b,c){var d="x-google-min-bitrate="+b+"; x-google-max-bitrate="+b+"; maxaveragebitrate="+1024*b+"; cbr=1; usedtx=0";c&&(d+="; stereo=1; sprop-stereo=1");c=a.sdp.split("\r\n");for(var e=[],f=0;f<c.length;f++){var k=c[f],l=k.match(/^a=rtpmap:(\d+) opus/);l&&(e.push("a=rtpmap:"+l[1]+" opus/48000/2"),e.push("b=AS:"+b),e.push("a=fmtp:"+l[1]+" "+d));k.match(/^a=rtpmap:/)||k.match(/^a=fmtp:/)||k.match(/^AS:/)||e.push(k)}a.sdp=e.join("\r\n");return a};var Jb=!1,rc,sc,R=null,tc,S,uc=null,T=null,J=null;
function vc(a){h("Setting "+(a?"pro":"entry level")+" features");window.Me=a;for(var b=document.getElementsByClassName("insignia_pro"),c=0;c<b.length;c++)b[c].hidden=a;b=document.getElementsByClassName("pro");for(c=0;c<b.length;c++){var d=b[c];a?d.classList.remove("disabled"):d.classList.add("disabled");d instanceof HTMLSelectElement&&(d.disabled=!a);if(d instanceof HTMLOptionElement){var e=a;d.disabled=!e;if(d.classList.contains("pro_label")){var f=d.textContent;e?f=f.replace(" (Pro)",""):f.match(/ \(Pro\)$/)||
(f+=" (Pro)");d.textContent=f}}}d=document.querySelector("#watermark img");a?(d.src="logo/wxp",d.alt="Cleanfeed Pro"):(d.src="logo/wx",d.alt="Cleanfeed");d=document.getElementById("texture");d.hidden=!a;document.querySelector(".toolbar .button.upgrade").hidden=a;if(!a){a=document.querySelector("#quality select");switch(a.value){case "max-mono":wc("speech");break;case "max-stereo":wc("music")}b=document.querySelectorAll(".contrib select.mode");for(c=0;c<b.length;c++)if(a=b[c],a.value="s",a.onchange)a.onchange();
b=document.querySelectorAll(".contrib select.gain");for(c=0;c<b.length;c++)if(a=b[c],a.value="0",a.onchange)a.onchange();for(a=R;1<a.w.length;)a.w.pop().b();a.Y();a=document.getElementById("expiry");a.value="unlimited";a=document.querySelector(".button.production");a.classList.contains("engaged")&&xc();for(a=uc;0<a.Wb.length;)a.Wb[0].b()}}function yc(){zc();vc(!0)}function xc(){Ya(document.querySelector(".button.production"),document.getElementById("production"))}
function Bb(a){var b=a.handle;Eb();rc=new ha("s_"+b,ka);var c=new Ac(a.relays);Oa().then(function(d){Bc(d,c);history.pushState(null,null,document.location.origin+"/"+("studio?"+b));Cc(a.name);Dc(a.email);Ec(a.verified);wc(a.quality);vc(a.pro);d=a.newsletter;h("Our newsletter setting is "+d);document.getElementById("newsletter").checked=d;d=G;h("Un-corking socket with "+d.ub.length+" in buffer");d.Ec=!1;Db(d);T()})}function Fc(a,b){yb(b,a)}
function Bc(a,b){I(G,"JOINING",function(a){tc.join(a.invite,a.name)});I(G,"LEAVING",function(a){a=a.invite;var b=sc,c=b.ic[a];delete b.ic[a];y(b.ka,c);c.b()});I(G,"VERF",function(){h("Session is now verified");Ec(!0)});I(G,"PEER",function(a){sc.ic[a.origin].Sa(a["package"])});S=new aa(a);R=new Gc(new ja(rc,"devices"),"...",S);sc=new Hc(S,b);tc=new Ic(S,R,sc);var c=document.querySelector(".toolbar .button.production");c.onclick=B(c.onclick,xc);uc=new Jc(S.c,S.qa);Kc();Lc();new Mc(document.querySelector("#audio .tabs"),
null);Nc();Oc();Pc();Qc();Rc();"alpha"in sa()&&(Jb=!0);Ib();Jb&&new E("Alpha features are enabled")}window.boot=function(){h("Booting studio");if(navigator.userAgent.match(/(iPhone|iPad)/i))A("on-ios",!0);else{var a=p();a?(50>a&&A("old-chrome"),u("Chrome "+a+("SharedArrayBuffer"in window?"":"; no SharedArrayBuffer"))):(document.getElementById("chrome-url").textContent=document.URL,A("no-chrome"))}jc();vb();zb();"/signup"==window.location.pathname?Sc():"/recover"==window.location.pathname?Tc():Uc()};
window.go_subs=function(){var a=[yc],b=window.open("/subscription");b._subwindow_params=a;b.socket=G;b.rpc=ub;ic()};window.show_overlay=A;window.finish_overlay=ic;function Mc(a,b){var c=a.getElementsByClassName("nav")[0],d=a.getElementsByClassName("main")[0];this.Nb={};this.X=this.ea=null;null!==b&&(this.X=b+"/");var e=d.querySelectorAll(":scope > .content"),c=c.getElementsByTagName("li");h(c.length+" buttons and "+e.length+" pages");for(var f=null,k=0;k<e.length;k++){var l=e[k],m=c[k];h("Tab "+k+"/"+e.length+": "+m.textContent);m.classList.add("tabname");l.classList.add("popout");var n=m.classList.contains("disabled"),v=l.getElementsByTagName("h2")[0].cloneNode(!0),
q=v,ba=m,F=p();if(F&&63>F)for(q.className="",F=0;F<ba.classList.length;F++)q.classList.add(ba.classList[F]);q.classList=ba.classList;d.insertBefore(v,l);(q=l.id)||(q=k);this.Nb[q]={page:l,button:m,heading:v,disabled:n,current:!1};m.onclick=this.go.bind(this,q);v.onclick=this.go.bind(this,q);m.classList.contains("current")&&(f=this.Nb[q])}f&&Vc(this,f);this.o()}function Vc(a,b){b.disabled||(null!==a.ea&&(a.ea.current=!1),b.current=!0,a.ea=b,a.o())}
Mc.prototype.go=function(a){h("Tab switching "+this.ea+"->"+a);Vc(this,this.Nb[a])};
Mc.prototype.o=function(){for(var a in this.Nb){var b=this.Nb[a];b.disabled?(b.button.classList.add("disabled"),b.heading.classList.add("disabled")):(b.button.classList.remove("disabled"),b.heading.classList.remove("disabled"));b.current?(b.button.classList.add("current"),b.heading.classList.add("current"),K(b.page,!0),this.X&&history.pushState(null,null,document.location.origin+"/"+(this.X+a))):(b.button.classList.remove("current"),b.heading.classList.remove("current"),K(b.page,!1))}};function Wc(a,b,c){h("Audible watermark");this.c=a;this.de=b;this.xc=c;this.sa=new XMLHttpRequest;this.sa.open("GET","/watermark.opus");this.sa.responseType="arraybuffer";this.sa.onload=this.Oc.bind(this);this.sa.send();this.Ub=this.xa=this.g=this.R=null}Wc.prototype.Oc=function(){var a=this.sa.response;this.sa=null;this.c.decodeAudioData(a,function(a){this.R=a;this.ec(this.de)}.bind(this))};
Wc.prototype.ec=function(a){function b(){h("Watermark finished; rescheduling");null!==this.xa&&(clearTimeout(this.xa),this.xa=null);var a=20+10*Math.random();Xc(this);this.Ub=setTimeout(this.ec.bind(this,null),1E3*a)}h("Playing watermark");this.g=this.c.createBufferSource();null===a&&(a=this.xc[Math.floor(Math.random()*this.xc.length)]);this.g.connect(a);this.g.playbackRate.value=1+.01*(Math.random()-.5);this.g.buffer=this.R;this.g.onended=b.bind(this);this.g.start(0);this.xa=setTimeout(function(){h("Watermark waited too long for playback, no audio flow here");
this.xa=null;b.call(this)}.bind(this),2E3*this.R.duration)};function Xc(a){null!==a.g&&(a.g.stop(),a.g.disconnect(),a.g=null)}Wc.prototype.b=function(){this.sa&&(this.sa.abort(),this.sa=null);Xc(this);this.xa&&(clearTimeout(this.xa),this.xa=null);this.Ub&&(clearTimeout(this.Ub),this.Ub=null);this.xc=this.c=null};var Yc=new ArrayBuffer(524288);function kb(){this.mb=new Blob;this.aa=[];this.vb=setInterval(this.Hd.bind(this),16E3);this.M=null;this.Ya=0;this.wc=null;this.qb=4294967295}g=kb.prototype;g.b=function(){this.aa=this.mb=null;clearInterval(this.vb);this.M=null};g.Hd=function(){h("Repacking blob");if(0!=this.aa.length){var a=this.aa;this.aa=[];a.unshift(this.mb);this.mb=new Blob(a)}};
g.push=function(a){a=32767*a;32767<a?a=32767:-32768>a&&(a=-32768);if(262144==this.Ya){var b=this.M;this.wc&&(b=Yc,h("No data; using the zero page"));this.aa.push(b);this.M=null;this.Ya=0}this.M||(this.M=new ArrayBuffer(524288),this.ua=new DataView(this.M),this.wc=!0);0!=a?(b=2*this.Ya,this.ua.setInt16(b,a,!0),this.wc=!1,a=z(va,this.qb,this.ua.getUint8(b)),this.qb=z(va,a,this.ua.getUint8(b+1))):this.qb=z(va,z(va,this.qb,0),0);this.Ya++};
g.blob=function(){this.Hd();return 0==this.Ya?this.mb:new Blob([this.mb,this.M.slice(0,2*this.Ya)])};g.hb=function(){return this.qb};
function lb(a,b){switch(a){case 22050:case 24E3:case 32E3:case 44100:case 48E3:this.sb=1;break;case 88200:case 96E3:this.sb=2;break;case 176400:case 192E3:this.sb=4;break;default:w("Your hardware uses an unusual sample rate; please change audio driver settings (48kHz recommended) and re-start"),t()}this.Pa=a/this.sb;this.ne=b;this.ed=this.ne/this.sb;h("Resampling from "+a+" to "+this.Pa)}
function mb(a,b,c){var d=a.sb,e=1/d,f=a.ed,k;for(k in b);for(var l=k=0;l<f;l++){for(var m in b){for(var n=0,v=0;v<d;v++)n+=b[m][k+v];c.push(n*e)}k+=d}return a.ed}
function Zc(a,b,c){function d(a,b,c){for(var d=c.length,e=0;e<d;e++)a.setUint8(b+e,c.charCodeAt(e))}c=2*c*b;var e=new ArrayBuffer(56),f=new DataView(e);d(f,0,"RIFF");f.setUint32(4,44+c-8,!0);d(f,8,"WAVE");d(f,12,"fmt ");f.setUint32(16,16,!0);f.setUint16(20,1,!0);f.setUint16(22,b,!0);f.setUint32(24,a,!0);f.setUint32(28,a*b*2,!0);f.setUint16(32,2*b,!0);f.setUint16(34,16,!0);d(f,36,"clfd");f.setUint32(40,4,!0);f.setUint32(44,0,!0);d(f,48,"data");f.setUint32(52,c,!0);ua(e);qa(4294967295===wa(e));return e}
function ob(a,b,c,d){b=Zc(b,c,d);c=a.blob();b=new Blob([b,c],{type:"audio/wav"});a=a.hb();return{blob:b,hb:~a>>>0}};function $c(a){return(new TextEncoder("utf-8")).encode(a)}function U(){this.M=new ArrayBuffer(64);this.ua=new DataView(this.M);this.N=0}function ad(a,b){for(;a.M.byteLength-a.N<b;){var c=2*a.M.byteLength,d=new Uint8Array(c),e=new Uint8Array(a.M);d.set(e);a.M=d.buffer;a.ua=new DataView(a.M);h("Extended ZipBuffer size to "+c)}}U.prototype.length=function(){return this.N};U.prototype.buffer=function(){return this.M.slice(0,this.N)};function W(a,b){ad(a,2);a.ua.setUint16(a.N,b,!0);a.N+=2}
function X(a,b){ad(a,4);a.ua.setUint32(a.N,b,!0);a.N+=4}function Y(a,b){ad(a,8);a.ua.setBigUint64(a.N,BigInt(b),!0);a.N+=8}function bd(a,b){for(var c in b){var d=a,e=b[c];ad(d,1);d.ua.setUint8(d.N,e);d.N+=1}}function cd(a,b){var c=b.getSeconds()>>>1,c=c|b.getMinutes()<<5,c=c|b.getHours()<<11;W(a,c);var c=b.getDate(),c=c|b.getMonth()+1<<5,d=b.getFullYear();1980>d&&(d=1980);W(a,c|d-1980<<9)}function dd(){this.Yc=[];this.H=0}function ed(a,b){a.Yc.push(b);a.H+=b.byteLength}dd.prototype.length=function(){return this.H};
dd.prototype.blob=function(){return new Blob(this.Yc,{type:"application/zip"})};function rb(a){void 0===a&&(a=!1);this.Wa=[];this.Jc=a}
rb.prototype.blob=function(){var a=new dd,b=[],c;for(c in this.Wa){var d=this.Wa[c];h("Processing file: "+d.filename);b.push(a.length());var e;e=d;var f=this.Jc||4294967295<=e.length,k=new U;X(k,67324752);W(k,45);W(k,2048);W(k,0);cd(k,e.Qd);X(k,e.hb);f?(X(k,4294967295),X(k,4294967295)):(X(k,e.length),X(k,e.length));var l=$c(e.filename);W(k,l.length);f?W(k,20):W(k,0);bd(k,l);f&&(W(k,1),W(k,16),Y(k,e.length),Y(k,e.length));e=k.buffer();ed(a,e);e=a;d=d.blob;e.Yc.push(d);e.H+=d.size}c=a.length();for(var m in this.Wa)d=
this.Wa[m],e=b[m],h("Central directory entry for: "+d.filename),f=new U,k=this.Jc||4294967295<=d.length||4294967295<=e,X(f,33639248),W(f,798),W(f,45),W(f,2048),W(f,0),cd(f,d.Qd),X(f,d.hb),k?(X(f,4294967295),X(f,4294967295)):(X(f,d.length),X(f,d.length)),l=$c(d.filename),W(f,l.length),k?W(f,32):W(f,0),W(f,0),W(f,0),W(f,0),X(f,2166620161),k?X(f,4294967295):X(f,e),bd(f,l),k&&(W(f,1),W(f,28),Y(f,d.length),Y(f,d.length),Y(f,e),X(f,0)),d=f.buffer(),ed(a,d);m=a.length();d=m-c;b=this.Wa.length;(e=this.Jc)||
(e=65535<=b);e||4294967295<=d||4294967295<=c?(h("Archive requires a Zip64 footer"),d=a.length(),m=m-c,e=new U,X(e,101075792),Y(e,44),W(e,798),W(e,45),X(e,0),X(e,0),Y(e,b),Y(e,b),Y(e,m),Y(e,c),X(e,117853008),X(e,0),Y(e,d),X(e,1),b=e.buffer(),ed(a,b),ed(a,fd())):ed(a,fd(b,c,d));return a.blob()};function fd(a,b,c){void 0===a&&(a=65535,b=c=4294967295);var d=new U;X(d,101010256);W(d,0);W(d,0);W(d,a);W(d,a);X(d,c);X(d,b);W(d,0);return d.buffer()}(new U).length();var gd=new U;W(gd,65535);gd.length();
var hd=new U;X(hd,4294967295);hd.length();for(var id=new U,jd=0;100>jd;jd++)X(id,4294967295);id.length();var Z,kd=null,ld,md;function wc(a){h("Our audio quality is "+a);Z=document.querySelector("#quality select").value=a;md.Rb(Z);ld.eval()}
function Nc(){var a=document.getElementById("quality"),b=a.getElementsByTagName("select")[0],c=a.getElementsByClassName("button")[0],d=a.getElementsByClassName("subtext")[0];c.onclick=function(){Z=b.value;H("ACCT",{quality:Z});kd&&(kd.na(),kd=null);sc.empty()||(kd=new E("Audio has been changed to "+b.options[b.selectedIndex].textContent.toLowerCase()+". Existing connections are not affected."));md.Rb(Z);ld.eval()};ld=new Q(c,a,function(){return a.elements.quality.value!=Z});md=new Yb(b,d,{})}
function Oc(){var a=document.getElementById("playback"),b=new ja(rc,"playback");new nd(a,Qa,b)}function Pc(){function a(){b.value=R.count()}var b=document.getElementById("number-of-capture-devices");R.Y=B(R.Y,a);a();b.onchange=B(b.onchange,function(){var a=parseInt(b.value);h("Updating number of capture devices to "+a);R.set(a)})};function Jc(a,b){var c=document.getElementById("production"),d=D(c.getElementsByClassName("template")[0]),e=d.getElementsByTagName("input")[0];e.onchange=B(e.onchange,this.Yd.bind(this));var f=d.getElementsByClassName("potential")[0];f.onclick=B(f.onclick,e.click.bind(e));c.appendChild(d);this.Kd=document.getElementsByClassName("unit potential")[0];this.Ld=this.ze.bind(this);this.Kd.addEventListener("dragenter",this.Ld);this.c=a;this.a=d;this.v=e;this.Cc=this.a.getElementsByClassName("carts")[0];
this.eb=this.c.createGain();this.eb.connect(b);this.D=this.a.getElementsByClassName("gain")[0];this.D.onchange=this.ab.bind(this);this.Wb=[]}Jc.prototype.b=function(){this.Le();this.Kd.removeEventListener("dragenter",this.Ld);this.c=this.v=this.Cc=null;this.eb.disconnect();this.eb=null;this.a.parentNode.removeChild(this.a);this.a=null};Jc.prototype.ab=function(){this.eb.gain.value=Math.pow(10,Number(this.D.value)/10)};
Jc.prototype.Yd=function(a){for(var b=a.target.files,c=0;c<b.length;c++){var d=b[c];h(d.name+": "+d.size+" bytes");d=new od(this,d);this.Wb.push(d)}a.target.form.reset()};Jc.prototype.ze=function(a){h("Drag is asking to trash this");a.preventDefault();for(a=this.a.getElementsByClassName("nominated");0<a.length;)a[0].classList.remove("nominated")};
function od(a,b){var c=a.Cc,d=c.getElementsByClassName("cart template")[0],e=D(d),d=c.getElementsByClassName("dropzone template")[0],d=D(d),f=b.name,f=f.replace(/\.(wav|flac|ogg|oga|mp3|aac|m4a)$/i,""),f=f.trim(),k=e.getElementsByClassName("name")[0];k.textContent=f;if(f=f.match(/[0-9]+/g))k=e.getElementsByClassName("suffix")[0],k.textContent=f.join(" ");e.draggable=!0;e.addEventListener("dragstart",this.$d.bind(this));e.addEventListener("dragend",this.be.bind(this));e.addEventListener("dragenter",
this.ae.bind(this));k=new FileReader;h("Initiating loading: "+b.name);k.onloadend=this.Oc.bind(this);k.readAsArrayBuffer(b);e.classList.add("loading");k=c.getElementsByClassName("dropzone");c.insertBefore(e,k[k.length-1]);c.insertBefore(d,e);this.a=e;this.Ma=d;this.ha=a;this.S=this.g=this.R=null;this.i=b.name;this.Xb=null}g=od.prototype;
g.b=function(){h("Destroying cart: "+this.i);this.Xb&&(clearTimeout(this.Xb),this.Xb=null);this.dd();this.a.remove();this.a=null;this.Ma.remove();this.Ma=null;y(this.ha.Wb,this);this.R=this.ha=null};
g.Oc=function(a){function b(a){u("Loaded "+a.duration.toFixed(1)+"s audio clip: "+this.i);this.R=a;this.a.onclick=B(this.a.onclick,this.click.bind(this));this.a.classList.remove("loading")}function c(a){var b=a.message;"NotFoundError"==a.name?b="The file doesn't exist":"EncodingError"==a.name?b="The file doesn't contain valid audio":"NotReadableError"==a.name&&(b="Your system isn't permitted to read this file");w("Could not load "+this.i+": "+b);x(this.i+": "+a.message);this.a.classList.add("errored");
this.Xb=setTimeout(this.b.bind(this),6E3)}h("Loading callback; state is "+a.target.readyState);if(!a.target.result)return c.bind(this)(a.target.error);a=a.target.result;ga()?this.ha.c.decodeAudioData(a,b.bind(this),c.bind(this)):this.ha.c.decodeAudioData(a).then(b.bind(this))["catch"](c.bind(this))};g.click=function(){this.g?this.dd():this.ec()};
g.ec=function(){u("Playing "+this.i);var a=this.ha.c.createBufferSource();a.connect(this.ha.eb);a.buffer=this.R;a.onended=this.dd.bind(this);a.start(0);this.S=new cb(this.ha.c,a,this.a.getElementsByClassName("meter")[0]);this.g=a;this.a.classList.add("playing")};g.dd=function(){null!==this.g&&(this.S.b(),this.S=null,this.g.onended=null,this.g.stop(),this.g.disconnect(this.ha.eb),this.g=null,this.a.classList.remove("playing"))};
g.$d=function(a){h("Drag begins of cart");a.dataTransfer.effectAllowed="move";this.Ma.remove();var b=this.a.nextSibling;b.classList.add("nominated");b.style.display="none";setTimeout(function(){b.style.display=null;this.a.classList.add("moving");this.a.remove()}.bind(this),0)};
g.ae=function(a){h("Drag over");a.preventDefault();a=this.ha.a.getElementsByClassName("nominated");var b;1==a.length?b=a[0]:b=null;b&&b.classList.remove("nominated");if(b){a:{a=this.a;do if(a=a.nextSibling,a===b){b=!0;break a}while(a);b=!1}b=b?this.a.previousSibling:this.a.nextSibling}else b=this.a.nextSibling;b.classList.add("nominated")};
g.be=function(){h("Drag completes of cart");var a=this.ha.a.getElementsByClassName("dropzone nominated");if(0==a.length)this.b();else{var b=a[0];b.classList.remove("nominated");b.style.display="none";setTimeout(function(){b.style.display=null},50);a=this.ha.Cc;a.insertBefore(this.a,b);a.insertBefore(this.Ma,this.a);this.a.classList.remove("moving")}};window.carts=function(){new Jc(S.c,S.qa)};window.eargasm=function(){u("Segmentation fault");vc(!0);xa=!0};var pd=0,qd=null;
function rd(a,b,c,d){u("Starting recording: "+a);this.i=a;var e=document.getElementById("decks"),f=D(e.getElementsByClassName("template")[0]);this.J=S.ld(c,d,b);b=f.getElementsByClassName("toggle")[0];b.onclick=this.fd.bind(this);b=f.getElementsByClassName("download")[0];b.onclick=this.Ic.bind(this);b=f.getElementsByClassName("destroy")[0];b.onclick=this.Bc.bind(this);this.ga=new Nb(b);b=f.getElementsByClassName("name")[0];b.textContent=a;b=f.getElementsByClassName("status")[0];a=this.J;b=Gb.bind(null,
b);a.G&&(clearInterval(a.G),a.G=null,a.ja=null);b&&(a.ja=b,a.oa(),a.G=setInterval(a.oa.bind(a),500));e.appendChild(f);e=f.getElementsByClassName("meter")[0];this.S=new cb(S.c,this.J.source(),e);this.W=!1;this.J.start();Ob(this.ga);this.a=f;pd++;this.o();null===qd&&(qd=new E("Recordings are held in your browser's memory, saved only when you use the download button. We always recommend testing before an important recording.",30))}g=rd.prototype;g.fd=function(){(this.W=!this.W)?this.T():this.Ib();this.o()};
g.T=function(){this.J.stop();this.ga.pause()};g.Ib=function(){this.J.start();this.ga.Qb()};g.o=function(){this.W?this.a.classList.add("paused"):this.a.classList.remove("paused")};g.Ic=function(){this.J.save();Ob(this.ga)};g.Bc=function(){new gc(function(){this.b()}.bind(this),function(){this.a.hidden=!1;this.W||this.Ib()}.bind(this),"Removed recording "+("'"+this.i+"'"));this.a.hidden=!0;this.W||this.T()};
g.b=function(){h("Completing recording: "+this.i);this.J.b();this.J=null;this.S.b();this.S=null;this.a.parentNode.removeChild(this.a);this.i=this.a=null;pd--};function Qc(){window.onbeforeunload=function(){h("Checking before exit; "+pd+" decks");return 0<pd?"A recording is in progress and not saved":null}};var sd,td,ud=null;function Ec(a){sd=a;K(document.getElementById("alert-not-verified"),!sd);td.eval()}
function Kc(){function a(){var a=v.value.trim().toLowerCase(),b=document.getElementById("alert-resend");n.checked||a!=ud?K(b,!1):K(b,!0)}function b(){n.checked||(m.value="email",m.onchange())}function c(){K(document.getElementById("invite-email-settings"),"email"==m.value)}function d(){h("Copy URL to clipboard");var a=document.createElement("textarea");a.value=V.value;f.appendChild(a);a.select();document.execCommand("copy");f.removeChild(a);new E("The link has been copied to the clipboard")}function e(){f.elements.name.value=
"";f.elements.address.value="";td.eval()}var f=document.getElementById("form-invite"),k=new P(f.elements.name,Sb.bind(null,"the person's name")),l=new P(f.elements.address,Pb),m=f.elements.how;m.onchange=c;c();var n=document.getElementById("invite-advanced");new Zb(n,document.getElementById("invite-advanced-settings"));n.onchange=B(n.onchange,b);b();var v=f.elements.address;v.oninput=B(v.oninput,a);n.onchange=B(n.onchange,a);var q=f.getElementsByClassName("submit")[0],ba=new N(q,function(){var a=
f.elements.name.value.trim(),b=f.elements.expiry.value;"unlimited"==b&&(b=null);var c={name:a,expiry:b};"email"==f.elements.how.value&&(b=f.elements.address.value.trim(),c.email=b,ud=b.trim().toLowerCase());ba.start();H("INVITE",c,function(b){"error"in b?M(document.getElementById("invite-alert"),b.error):"url"in b?(h("Got invite "+b.url),f.elements.name.disabled=!0,V.value=b.url,V.focus(),V.setSelectionRange(0,V.value.length),V.scrollLeft=V.scrollWidth,K(Vb,!0),K(F,!1)):(w("Sending invite to "+a+
" <"+c.email+">"),ic(),e());ba.stop()})});td=new Q(q,f,function(){return sd&&k.L()&&("email"!=m.value||l.L())?!0:!1});var F=document.getElementById("invite-settings");K(F,!0);var Vb=document.getElementById("invite-result"),V=f.elements.url,q=document.getElementById("copy-url");document.queryCommandSupported("copy")?q.onclick=d:q.classList.add("disabled");q=document.getElementById("overlay-close");q.onclick=B(q.onclick,function(){h("Considering a form reset in response to an invite");f.elements.name.disabled&&
(f.elements.name.disabled=!1,e(),K(F,!0),K(Vb,!1))});f.reset()};function vd(a){h("Initialising latency finder: "+a);this.X=a;this.Qa=this.ra=this.Db=this.Nc=null;this.kc=0;this.vb=1E3;wd(this)}function xd(a,b){return null===a?b:(3*a+b)/4}function yd(a,b){a.kc++;var c=null===a.ra?0:1-b/a.ra,c=c*c;1<a.kc&&(a.ra=xd(a.ra,b),a.Qa=xd(a.Qa,c));8<a.kc&&(c=a.Qa/30,a.vb=1E3+29E3*(1>c?1-c:0));h(a.X+": "+b+"; moving average is "+a.ra+" +/- "+a.Qa+"; sleeping "+a.vb)}
function wd(a){var b=new XMLHttpRequest;b.open("GET",a.X+"?"+Math.random().toString(36).substring(2),!0);b.onload=a.cc.bind(a,!1);b.onerror=a.cc.bind(a,!0);b.send(null);a.Nc=performance.now()}vd.prototype.Gd=function(){h("Latency finder lost its connection to the server");this.Fa=null;this.b()};vd.prototype.cc=function(a){var b=this,c=performance.now()-this.Nc;a||yd(this,c);this.Nc=null;var d;a?d=18E4:d=this.vb;d*=Math.random();this.Db=setTimeout(function(){b.Db=null;wd(b)},d)};
vd.prototype.b=function(){this.Fa&&(this.Fa.close(),this.Fa=null);this.Db&&(clearTimeout(this.Db),this.Db=null)};function zd(a){return null===a.ra?null:a.ra+3*Math.sqrt(a.Qa)}vd.prototype.debug=function(){return(null===this.ra?"?":this.ra.toFixed(1))+"+"+(null===this.Qa?"?":this.Qa.toFixed(1))+"/"+this.kc};function Gc(a,b,c){this.w=[];this.i=b;this.Ia=c;this.Y=ma;this.ob=a;a=this.ob.get();if(null!==a&&"object"==typeof a)for(b=0;b<a.length;b++)Ad(this,!1,a[b]);0==this.w.length&&Ad(this,!0,null)}function Ad(a,b,c){b=new gb(document.getElementById("devices"),b,c,a.i,S);b.Y=a.Na.bind(a);a.w.push(b)}g=Gc.prototype;g.set=function(a){if(a!=this.w.length){for(;this.w.length<a;)Ad(this,!1,null);for(;this.w.length>a;)this.w.pop().b();this.Na()}};g.count=function(){return this.w.length};
g.Na=function(){var a=[],b;for(b in this.w)a.push(db(this.w[b]));this.ob.set(a);this.Y()};g.nd=function(a){this.i=a;for(var b in this.w)this.w[b].nd(a)};g.Ha=function(a){for(var b=0;b<this.w.length;b++){var c=this.w[b],d="_local_"+b,e=this.i;0<b&&(e+=" "+(b+1));if(!c.Ha(a,d,e))return!1}return!0};var Bd;function Cd(a){a=a.trim();return null==Pb(a)?"Please enter your login name, not email":a.match(/^[a-zA-Z0-9\-]+$/)?null:"Please enter a valid login name"}
function Dd(a,b,c){function d(){K(this.j,!0);setTimeout(this.Vc.bind(this),100)}this.j=a.getElementsByTagName("form")[0];b&&(this.j.handle.value=b);this.ke=c;this.A=!1;this.Ce=new P(this.j.handle,Cd);this.De=new P(this.j.passwd,Sb.bind(null,"your password"));this.j.handle.onkeypress=function(a){return 45==a.charCode||97<=a.charCode&&122>=a.charCode||65<=a.charCode&&90>=a.charCode||48<=a.charCode&&57>=a.charCode?!0:!1};this.P=this.j.getElementsByClassName("alert")[0];a=this.j.getElementsByClassName("submit")[0];
this.ee=new Q(a,this.j,this.$b.bind(this));this.cb=new N(a,this.Nd.bind(this));a=document.getElementById("forgot");this.wd=new Ed(a,d.bind(this));a=document.getElementsByTagName("a")[0];a.onclick=this.Md.bind(this);d.call(this)}g=Dd.prototype;g.Md=function(){h("Starting the forgotten password process");K(this.j,!1);this.wd.start()};g.$b=function(){return this.A?!1:this.Ce.L()&&this.De.L()?!0:!1};
g.Vc=function(){h("Deciding where to place the cursor");""!=this.j.handle.value?this.j.passwd.focus():this.j.handle.focus()};g.hd=function(){h("Enter pressed on the login form");this.$b()?this.Nd():this.Vc()};g.Nd=function(){this.$b();var a=this.j.handle.value.trim(),b=this.j.passwd.value,a=a.toLowerCase();""==a?this.j.handle.focus():""==b?this.j.passwd.focus():this.dc(a,b)};
g.dc=function(a,b){qa(this.$b());u("Logging in");this.A=!0;this.cb.start();K(this.P,!1);this.j.handle.disabled=!0;this.j.passwd.disabled=!0;var c={type:"STUDIO",login:a,password:b};T=function(){this.ke();this.A=!1;this.cb.stop();J=T=null}.bind(this);J=function(a){this.j.passwd.value="";this.j.passwd.disabled=!1;this.j.handle.disabled=!1;this.ee.eval();setTimeout(this.Vc.bind(this),0);M(this.P,a);this.A=!1;this.cb.stop();J=T=null}.bind(this);G.send(c)};
function Ed(a,b){this.l=a;this.j=this.l.getElementsByTagName("form")[0];this.Tb=this.j.email;this.ie=b;var c=new P(this.j.email,Pb);this.Be=c;var d=this.j.getElementsByClassName("submit")[0];this.cb=new N(d,this.dc.bind(this));new Q(d,this.j,c.L.bind(c));this.P=this.l.getElementsByClassName("alert")[0];this.vd=this.l.getElementsByClassName("subtext")[0]}Ed.prototype.start=function(){K(this.j,!0);this.Tb.focus()};Ed.prototype.hd=function(){h("Enter pressed on the forgot form");this.Be.L()&&this.dc()};
Ed.prototype.dc=function(){var a=this.Tb.value.trim();this.cb.start();this.Tb.disabled=!0;K(this.P,!1);H("FORGOT",{email:a},function(a){this.cb.stop();this.Tb.disabled=!1;if(a.error)return M(this.P,a.error);K(this.j,!1);K(this.vd,!0);setTimeout(function(){K(this.vd,!1);this.ie()}.bind(this),6E3)}.bind(this))};function Uc(){h("Starting from login screen");var a=document.getElementById("login"),b=sa("studio");Bd=new Dd(a,"studio"in b?b.studio:null,function(){Wa(a)});Ua("login")}
window.do_login=function(){Bd.hd();return!1};window.start_forgot=function(){Bd.Md();return!1};window.do_forgot=function(){Bd.wd.hd();return!1};var Fd=null,Gd=null;
function Hd(a,b,c){this.i=a;a=document.getElementById("decks");this.a=D(a.querySelector(".template.multitrack"));var d=this.a.querySelector(".headline .status");this.J=new qb(S.c,b,Gb.bind(null,d));d=this.a.getElementsByClassName("toggle")[0];d.onclick=function(){(this.W=!this.W)?this.T():this.Ib();this.W?this.a.classList.add("paused"):this.a.classList.remove("paused")}.bind(this);d=this.a.getElementsByClassName("name")[0];d.textContent=this.i;d=this.a.getElementsByClassName("download")[0];d.onclick=
this.Ic.bind(this);d=this.a.getElementsByClassName("destroy")[0];d.onclick=this.Bc.bind(this);this.ga=new Nb(d);this.W=!1;this.J.start();Ob(this.ga);a.appendChild(this.a);this.K={};this.Fd=c;pd++;b=Hb();null===Fd&&(Fd=new E(b,null))}g=Hd.prototype;g.b=function(){for(var a in this.K)this.K[a].Je.b();this.K=null;this.ga.b();this.ga=null;this.a.parentNode.removeChild(this.a);this.a=null;this.J.b();this.J=null;this.Fd(this);this.i=this.Fd=null;pd--};
g.connect=function(a,b,c,d){if(void 0===d)switch(Z){case "music":case "max-stereo":d=2;break;default:d=1}h("Connecting to multitrack with "+d+" channels");if(a in this.K)a=this.K[a];else{var e=this.J;d=e.lb.length<d?null:new sb(e,d,b);if(null===d)null===Gd&&(Gd=new E("There is a limit on how many audio sources can be recorded; some are being ignored",null)),a=null;else{var e=this.a.getElementsByClassName("tracks")[0],f=D(e.getElementsByClassName("template")[0]),k=f.querySelector(".name");k.textContent=
b;k=f.querySelector(".button.download");k.onclick=d.download.bind(d);e.appendChild(f);b=f.getElementsByClassName("meter")[0];e=d.node();d={Je:new cb(S.c,e,b),audio:d};a=this.K[a]=d}}if(null===a)return!1;c.connect(a.audio.node());return!0};g.Bc=function(){new gc(function(){this.b()}.bind(this),function(){this.a.hidden=!1;this.W||this.Ib()}.bind(this),"Removed recording "+("'"+this.i+"'"));this.a.hidden=!0;this.W||this.T()};g.Ic=function(){this.J.download();Ob(this.ga)};
g.T=function(){this.J.stop();this.ga.pause()};g.Ib=function(){this.J.start();this.ga.Qb()};function Ic(a,b,c){this.Ia=a;this.ka=c;this.Pc=b;this.Pc.Y=B(this.Pc.Y,this.pd.bind(this));this.Va=[]}Ic.prototype.pd=function(){for(var a in this.Va){var b=this.Va[a];this.Pc.Ha(b);b.connect("_internal","Clips",this.Ia.qa,2);this.ka.Ha(b)}};Ic.prototype.ld=function(a,b){var c=new Hd(a,b,function(){y(this.Va,c)}.bind(this));this.Va.push(c);this.pd()};Ic.prototype.join=function(){var a=this.ka.join.apply(this.ka,arguments),b;for(b in this.Va)a.Ha(this.Va[b])};function Id(a,b,c,d){this.xb=a;this.i=b;var e=document.getElementById("contribs"),f=D(e.getElementsByClassName("template")[0]);f.getElementsByClassName("name")[0].textContent=b;e.appendChild(f);this.a=f;this.Cd=new Mb(f.querySelector(".tty.log"),a);this.$=new da(d);this.$.B.Z(!1);this.S=null;d=f.getElementsByClassName("rtc")[0];this.Xc=new nc(this.$.send(),c,Z,this.ye.bind(this),Fc.bind(null,a),this.log.bind(this),Gb.bind(null,d));d=f.getElementsByClassName("toggle")[0];d.onclick=function(){this.Z(!this.I);
this.I?this.log("Unmuting by request"):this.log("Muting by request")}.bind(this);d=f.querySelector(".button.settings");a=f.querySelector(".popout.settings");d.onclick=Ya.bind(null,d,a);d=f.querySelector(".button.log");a=f.querySelector(".popout.log");d.onclick=Ya.bind(null,d,a);d=f.querySelector(".button.hangup");this.xd=new Lb(d,this.He.bind(this),"disconnect "+b);this.za=this.a.querySelector("select.device option");this.V=this.a.querySelector("select.mode");this.V.onchange=this.Zc.bind(this);this.D=
this.a.querySelector("select.gain");this.D.onchange=this.ab.bind(this);this.I=this.da=this.Ad=!1}g=Id.prototype;g.name=function(){return this.i};g.b=function(){this.Xc.b();this.Xc=null;this.$&&(this.$.b(),this.$=null);this.xd.b();this.xd=null;document.getElementById("contribs").removeChild(this.a);this.Cd=this.a=null;w(this.i+" has disconnected")};g.log=function(a){this.Cd.write(a)};
g.o=function(){var a="connected",b="#333",c="Connected";this.I||(c="Muted");this.da||(a="waiting",c="Connecting");this.I&&(b="#27ae60");var d=this.a.getElementsByClassName("indicator")[0];d.style.backgroundColor=b;d=this.a.getElementsByTagName("img")[0];d.src="icon/"+a;d=this.a.getElementsByClassName("status")[0];d.textContent=c};g.Zc=function(){var a=this.V.value;h("Party selected audio mode: "+a);yb({mode:a},this.xb)};
g.ab=function(){var a=Number(this.D.value);h("Party selected gain: "+a);this.Ad?this.$.ib(Math.pow(10,a/10)):yb({gain:a},this.xb)};g.ye=function(a){this.da&&(this.log("Remote stream has disconnected"),this.$&&this.$.ba(null),this.S.b(),this.S=null,this.da=!1);a?(this.log("Remote stream is connected"),this.da=!0,this.$.ba(a),a=this.$.B,this.S=new cb(a.c,a.Ga,this.a.getElementsByClassName("meter")[0]),G.send({type:"PEERED",invite:this.xb})):this.log("A connected stream was revoked");this.o()};
g.Z=function(a){this.$.Z(a);this.I=a;this.o()};g.He=function(){G.send({type:"HANGUP",target:this.xb});this.log("Requested hangup via server")};
g.Sa=function(a){if("legacy"in a){this.log("The peer is using legacy audio system");for(var b=this.V,c=0;c<b.options.length;c++){var d=b.options[c];d.disabled=d.value in{s:!0,e:!0}?!1:!0}b=this.D;for(c=0;c<b.options.length;c++)d=b.options[c],0<Number(d.value)&&(d.disabled=!0);this.Ad=!0}"mode"in a&&(this.V.value=a.mode);"gain"in a&&(this.D.value=a.gain);"capture"in a&&(this.za.textContent=a.capture);this.Xc.Sa(a)};g.Ha=function(a){return a.connect(this.xb,this.i,this.$.B.va)};function nd(a,b,c){var d=a.getElementsByTagName("select")[0];this.C=a.getElementsByClassName("button")[0];this.C.onclick=B(this.C.onclick,this.Wd.bind(this));O(this.C,!1);this.Aa=this.C.getElementsByTagName("img")[0];this.P=a.getElementsByClassName("alert")[0];this.zb=b;this.ob=c;a=this.ob.get();this.kb=this.Fc=null;C(this.Aa,"waiting");this.td=new Ta(d,!1,this.le.bind(this),a)}nd.prototype.b=function(){this.td.b();this.zb=this.P=this.C=this.td=null};function Jd(a){var b=a.kb;a.zb(b);a.Fc=b}
nd.prototype.le=function(a){function b(a,b){if(a==this.kb){var c=b.message?b.message:"This device is not usable";x(c);M(this.P,c);C(this.Aa,"warning")}}function c(){a==this.kb&&(O(this.C,!0),C(this.Aa,"circle-tick"))}this.kb=a;null===this.Fc?(C(this.Aa,"circle-tick"),Jd(this)):(h("Auditioning device: "+a),K(this.P,!1),C(this.Aa,"waiting"),O(this.C,!1),Pa(document.createElement("audio"),a,c.bind(this),b.bind(this)))};
nd.prototype.Wd=function(){h("Selecting device: "+this.kb);O(this.C,!1);Jd(this);this.ob.set(this.Fc)};var Kd,Ld;function Cc(a){h("Our name is "+a);R.nd(a);Kd.Rb(a)}function Dc(a){h("Our email address is "+a);Ld.Rb(a)}
function Lc(){new Mc(document.querySelector("#profile .tabs"),null);Md();Kd=new Wb(document.getElementById("name-changer"),Sb.bind(null,"a name"),function(a,c){H("ACCT",{name:a},function(d){"error"in d||Cc(a);c()})});Ld=new Wb(document.getElementById("email-changer"),Pb,function(a,c){Ec(!1);H("MAIL",{email:a},function(d){"error"in d||Dc(a);c()})});var a=document.getElementById("newsletter");a.onchange=B(a.onchange,function(){H("ACCT",{newsletter:a.checked},null)})}
function Md(){var a=document.getElementById("form-change-passwd"),b=new P(a.elements["current-passwd"],Sb.bind(null,"your current password")),c=new Xb(a.elements["new-passwd"],a.elements["new-passwd-verify"]),d=a.getElementsByClassName("submit")[0];new Q(d,a,function(){return b.L()&&c.L()});d=new N(d,function(){var b=a.elements["current-passwd"].value,c=a.elements["new-passwd"].value;h("Changing password");H("PASSWD",{current:b,"new":c},function(b){d.stop();"error"in b?M(k,b.error):(w("You have changed your password"),
ic(),a.reset())});var k=document.getElementById("alert-change-passwd");K(k,!1);d.start()})};function Rc(){var a=p(),b=document.getElementById("form-record"),c=b.getElementsByClassName("submit")[0];c.onclick=function(){var a=b.elements.name.value,c=b.elements.timestamp.checked,d=b.elements.mode.value,l=a;""==a&&(a="Recording",l="Cleanfeed");if(c){var m=new Date,c=m.toLocaleDateString("en-GB",{weekday:"short"}),n=m.getHours();10>n&&(n="0"+n);m=m.getMinutes();10>m&&(m="0"+m);l=l+" "+c+" "+n+m}"multi"!=d?new rd(a,l,d,Z):tc.ld(a,l);ic()};var d=b.getElementsByTagName("select")[0];new Yb(d,b.getElementsByClassName("subtext")[0],
{me:"Only record your audio; other parties will hear what is being recorded.",you:"Only the other parties will be recorded.",everyone:"Records everyone, which means all un-muted parties.",split:"Record everyone, with your audio to the left channel and other parties to the right. Useful for editing later.",multi:"A separate file for each source of audio. Perfect for detailed post-production."});S||(h("Browser too old to support recording"),O(c,!1),K(b.getElementsByClassName("alert")[0],!0));a&&69>
a&&(Ub(d).disabled=!0)};var Nd,Od;function Tc(){h("Starting from recover");var a=document.getElementById("recover-form"),b=new Xb(a.elements.passwd,a.elements["passwd-verify"]),c=a.getElementsByClassName("submit")[0];new Q(c,a,b.L.bind(b));Od=new N(c,Pd);Ua("recover");Nd=function(){var a=sa("code");if(!("code"in a))return null;a=a.code;if(""==a||"string"!=typeof a)return null;h("Recovery code is "+a);return a}();null===Nd?(x("Bad recovery code"),t()):history.pushState(null,null,document.location.origin+"/recover")}
function Pd(){h("Recovery");var a=document.getElementById("recover-form").elements.passwd.value;h("Sending our recovery details");Od.start();a={type:"RECOVER",code:Nd,passwd:a};T=function(){Wa(document.getElementById("recover"));Od.stop();J=T=null};J=function(a){M(document.getElementById("recover-alert"),a);Od.stop();J=T=null};G.send(a)}window.do_recover=Pd;function Ac(a){h("initialising relay tracking");this.oc=[];for(var b in a){var c=a[b],c={gd:c.addr,tc:new vd(c.url)};this.oc.push(c)}this.Ra=[];this.h=setTimeout(this.Ee.bind(this),1E4)}Ac.prototype.b=function(){this.h&&(clearTimeout(this.h),this.h=null);this.Ra=this.oc=null};Ac.prototype.Ee=function(){h("Watershed reached; "+this.Ra.length+" callbacks");for(var a in this.Ra)this.Ra[a]();this.Ra=null};
function qc(a){var b=[],c;for(c in a.oc){var d=a.oc[c];h("Candidate relay "+d.gd+": "+zd(d.tc));b.push(d)}b.sort(function(a,b){var c=a.tc,d=zd(b.tc),c=zd(c);return null===c&&null===d?0:null===c?1:null===d?-1:d<c?1:d>c?-1:0});return b}function pc(a,b){null===a.Ra?b():a.Ra.push(b)}Ac.prototype.debug=function(){var a=qc(this),b=[],c;for(c in a){var d=a[c];b.push(d.gd+"("+d.tc.debug()+")")}return b.join(" ")};function Hc(a,b){this.Ia=a;this.$a=b;this.ka=[];this.ic={}}Hc.prototype.join=function(a,b){var c=new Id(a,b,this.$a,this.Ia);this.ic[a]=c;this.ka.push(c);1==this.ka.length?c.Z(!0):c.Z(!1);return c};Hc.prototype.Ha=function(a){for(var b in this.ka)if(!this.ka[b].Ha(a))return!1;return!0};Hc.prototype.empty=function(){return 0==this.ka.length};var Qd={},Rd,Sd,Td,Ud;function Vd(a){a=a.trim().toLowerCase();if(!a||""==a)return"Please choose a login name";if(3>a.length)return"Your login name must be at least 3 characters";if(14<a.length)return"This login name is too long";if(!a.match(/^[a-z0-9\\-]*$/))return"You can only use letters, numbers or a hyphen (-)";if(1==Qd[a])return"This login name is already taken";a in Qd||(Qd[a]=null,Wd(a));return null}
function Wd(a){Sd&&(clearTimeout(Sd),delete Qd[Rd]);Sd=setTimeout(function(){Sd=Rd=null;H("CHECK",{handle:a},function(b){"error"in b||(Qd[a]=b.taken,Td.eval(!0))})},2E3)}
function Sc(){h("Starting from signup");var a=document.getElementById("signup-form"),b=new P(a.elements.handle,Vd),c=new Xb(a.elements.passwd,a.elements["passwd-verify"]),d=new P(a.elements.name,Sb.bind(null,"your name")),e=new P(a.elements.email,Pb),f=a.getElementsByClassName("submit")[0];new Q(f,a,function(){return b.L()&&c.L()&&d.L()&&e.L()&&a.elements.terms.checked&&a.elements.over_age.checked},[a.elements.terms,a.elements.over_age]);Ud=new N(f,Xd);Kb(a);Ua("signup");Td=b}
function Xd(){h("Signing up");Ud.start();var a=document.getElementById("signup-form"),b={type:"SIGNUP",handle:a.elements.handle.value.trim().toLowerCase(),passwd:a.elements.passwd.value,name:a.elements.name.value.trim(),email:a.elements.email.value.trim()};a.elements.newsletter.checked&&(b.newsletter="true");T=function(){Wa(document.getElementById("signup"));Ud.stop();J=T=null};J=function(a){M(document.getElementById("signup-alert"),a);Ud.stop();J=T=null};G.send(b)}window.do_signup=Xd;function Yd(a){a?u("Entering trial"):u("Leaving trial");vc(a);var b=S;a&&null===b.Ob&&(b.Ob=new Wc(b.c,b.qa,[b.qa,b.qa,b.Xa,b.Hb]));a||null===b.Ob||(b.Ob.b(),b.Ob=null);a?document.body.classList.add("trial"):document.body.classList.remove("trial")}function zc(){Yd(!1);return!1}window.trial_begin=function(){Yd(!0);ic()};window.trial_end=zc;
</script></head>  <body class="console" onpageshow="boot()">  <div id="watermark"> <a href="https://cleanfeed.net/" target="_new"> <img src="./login_files/wx" height="38" alt="Cleanfeed"> </a> </div>  <div id="intro" class="plum" style="visibility: hidden;"></div>  <img id="texture" src="./login_files/wxp"> <audio id="recv" autoplay=""></audio>  <div class="unit toolbar"> <div class="button" onclick="show_overlay(&#39;record&#39;)"> <img src="./login_files/circle" alt=""> <div>Record</div> </div>  <div class="button production pro"> <img src="./login_files/vinyl" alt=""> <div>Clips <div class="insignia insignia_pro"></div></div> </div>  <div class="button" onclick="show_overlay(&#39;audio&#39;)"> <img src="./login_files/wave" alt=""> <div>Audio</div> </div>  <div></div>  <div class="button upgrade" onclick="show_overlay(&#39;upgrade&#39;)"> <div>Get</div> <img src="./login_files/pro" style="height: 10pt" alt=""> </div>  <div class="button" onclick="show_overlay(&#39;profile&#39;)"> <img src="./login_files/head" alt="Profile"> </div> </div>  <div id="devices">     <div class="unit contrib template"> <div class="headline"> <div class="toggle"> <div class="indicator"><img></div> <canvas class="meter"></canvas>  <div class="text"> <p class="name">...</p> <p class="status">...</p> </div> </div>  <div class="button"> <img src="./login_files/cog" alt="Settings"> </div> </div>  <div class="popout"> <div class="pane"> <div class="row fields"> <select class="device"></select>  <select class="mode"> <optgroup label="Clean"> <option value="s">Stereo</option> <option value="l" class="pro pro_label">Left only</option> <option value="r" class="pro pro_label">Right only</option> <option value="m" class="pro pro_label">Mono mix</option> </optgroup>  <optgroup label="Repair"> <option value="e" class="pro pro_label">Echo cancel</option> </optgroup> </select>  <select class="gain pro"> <option value="18">+18dB</option> <option value="15">+15dB</option> <option value="12">+12dB</option> <option value="9">+9dB</option> <option value="6">+6dB</option> <option value="5">+5dB</option> <option value="4">+4dB</option> <option value="3">+3dB</option> <option value="2">+2dB</option> <option value="1">+1dB</option> <option value="0" selected="">0</option> <option value="-1">-1dB</option> <option value="-2">-2dB</option> <option value="-3">-3dB</option> <option value="-4">-4dB</option> <option value="-5">-5dB</option> <option value="-6">-6dB</option> <option value="-9">-9dB</option> <option value="-12">-12dB</option> <option value="-15">-15dB</option> <option value="-18">-18dB</option> </select> </div> </div> </div> </div> </div>  <div id="decks"> <div class="unit contrib template"> <div class="headline"> <div class="toggle"> <div class="indicator"><img src="./login_files/circle" alt="Recording"></div> <canvas class="meter"></canvas>  <div class="text"> <p class="name">...</p> <p class="status">...</p> </div> </div>  <div class="button download"> <img src="./login_files/download" class="tall" alt="Download"> </div>  <div class="button destroy"> <img src="./login_files/cross" alt="Remove"> </div> </div> </div>  <div class="unit contrib multitrack template"> <div class="headline"> <div class="toggle"> <div class="indicator"><img src="./login_files/circle" alt="Recording"></div> <div class="meter"></div>  <div class="text"> <p class="name">...</p> <p class="status">...</p> </div> </div>  <div class="button download"> <img src="./login_files/download-multi" class="tall" alt="Download all"> </div>  <div class="button destroy"> <img src="./login_files/cross" alt="Remove"> </div> </div>  <div class="pane tracks"> <div class="track template"> <canvas class="meter"></canvas>  <div class="name">...</div>  <div class="button download"> <img src="./login_files/download" alt="Download"> </div> </div> </div> </div> </div>  <div id="production" class="popout"> <div class="unit cartwall template"> <div class="carts"> <div class="dropzone template"></div>  <div class="cart template"> <div class="name"></div> <div class="suffix"></div> <canvas class="meter"></canvas> </div>  <div class="dropzone"></div><!--  --><div class="cart potential"> <form> <input type="file" name="file" multiple="" style="visibility: hidden"> </form> <span style="font-size: 170%; vertical-align: middle">+</span> </div> </div>  <div class="controls"> <select class="gain"> <option value="18">+18dB</option> <option value="15">+15dB</option> <option value="12">+12dB</option> <option value="9">+9dB</option> <option value="6">+6dB</option> <option value="5">+5dB</option> <option value="4">+4dB</option> <option value="3">+3dB</option> <option value="2">+2dB</option> <option value="1">+1dB</option> <option value="0" selected="">0</option> <option value="-1">-1dB</option> <option value="-2">-2dB</option> <option value="-3">-3dB</option> <option value="-4">-4dB</option> <option value="-5">-5dB</option> <option value="-6">-6dB</option> <option value="-9">-9dB</option> <option value="-12">-12dB</option> <option value="-15">-15dB</option> <option value="-18">-18dB</option> </select> </div> </div> </div>  <hr>  <div id="contribs"> <div class="unit contrib template"> <div class="headline"> <div class="toggle"> <div class="indicator"><img src="./login_files/waiting"></div> <canvas class="meter"></canvas>  <div class="text"> <p class="name">...</p> <p class="status">...</p> </div> </div>  <div class="button log"> <img src="./login_files/text-log" alt="Log"> </div>  <div class="button settings"> <img src="./login_files/cog" alt="Settings"> </div>  <div class="button hangup"> <img src="./login_files/cross" alt="Remove"> </div> </div>  <div class="popout settings"> <div class="pane"> <div class="row fields"> <select class="device" disabled=""> <option>...</option> </select>  <select class="mode"> <optgroup label="Clean"> <option value="s">Stereo</option> <option value="l" class="pro pro_label">Left only</option> <option value="r" class="pro pro_label">Right only</option> <option value="m" class="pro pro_label">Mono mix</option> </optgroup>  <optgroup label="Repair"> <option value="e" class="pro pro_label">Echo cancel</option> </optgroup> </select>  <select class="gain pro"> <option value="18">+18dB</option> <option value="15">+15dB</option> <option value="12">+12dB</option> <option value="9">+9dB</option> <option value="6">+6dB</option> <option value="5">+5dB</option> <option value="4">+4dB</option> <option value="3">+3dB</option> <option value="2">+2dB</option> <option value="1">+1dB</option> <option value="0" selected="">0</option> <option value="-1">-1dB</option> <option value="-2">-2dB</option> <option value="-3">-3dB</option> <option value="-4">-4dB</option> <option value="-5">-5dB</option> <option value="-6">-6dB</option> <option value="-9">-9dB</option> <option value="-12">-12dB</option> <option value="-15">-15dB</option> <option value="-18">-18dB</option> </select> </div> </div> </div>  <div class="popout log"> <div class="pane"> <div class="tty rtc">...</div> <div class="tty log"></div> </div> </div> </div> </div>  <div class="unit potential" onclick="show_overlay(&#39;invite&#39;)"> <!-- Helvetica font (Mac) has unusually aligned '+', so be specific --> <span style="font-size: 200%; vertical-align: middle; font-family: Arial, sanf-serif">+</span>  <span style="letter-spacing: 2pt">CONNECT</span> </div>  <div id="hud"> <div id="notifications"> <div class="notification template"></div>  <div class="notification undoable template"> <div class="message"></div>  <div class="button"> <img src="./login_files/again"> <div>Restore</div> </div> </div> </div> <div id="trying"> <div class="message"> <p>Youre trying Cleanfeed Pro</p>  <p class="subtext">You'll hear an audible watermark in the trial. Sign up  support the development of Cleanfeed, and get extra features for advanced podcasters and broadcasters.</p> </div>  <div class="buttons"> <div class="button good submit" onclick="go_subs()"> <div>Sign up</div> </div>  <div class="nothanks"> <a href="https://cleanfeed.net/studio" onclick="return trial_end()">No thanks</a> </div> </div>  <div class="logo"> <a href="https://cleanfeed.net/" target="_new"> <img class="logo" src="./login_files/wxp" height="38" alt="Cleanfeed Pro"> </a> </div> </div> </div>  <div id="overlay" class="page"> <img id="overlay-close" src="./login_files/cross" alt="Go back" onclick="finish_overlay()">  <div id="invite" class="content"> <h2>Invite someone to this Cleanfeed session</h2>  <p>We'll create a link that connects directly to you.</p>  <form id="form-invite" onsubmit="return false"> <div class="row validated pre_popout"> <div class="fields"> <input type="text" name="name" spellcheck="false" placeholder="Name"> </div> <div class="alert"></div> </div>  <div class="popout" id="invite-settings"> <div class="popout" id="invite-advanced-settings"> <div class="row fields"> <div class="insignia insignia_pro"></div> <label style="margin-right: 0.5em">Limit to the next</label> <select id="expiry" style="flex: 1"> <option value="30 minutes" class="pro">30 minutes</option> <option value="1 hour" class="pro">1 hour</option> <option value="2 hours" class="pro">2 hours</option> <option value="8 hours" class="pro">8 hours</option> <option value="24 hours" class="pro">24 hours</option> <option value="3 days" class="pro">3 days</option> <option value="1 week" class="pro">1 week</option> <option value="1 month" class="pro">1 month</option> <option value="unlimited" selected="">unlimited</option> </select> </div>  <div class="row pre_popout"> <select id="how"> <option value="email" selected="">Send by email</option> <option value="here">I'll share the link myself</option> </select> </div> </div>  <div class="popout" id="invite-email-settings"> <div class="row validated"> <div class="fields"> <input type="email" name="address" spellcheck="false" placeholder="Email address"> </div> <div class="alert"></div> </div>  <p class="subtext">We'll only use this email address once  to send the invite.  We don't share it with third parties or use it to send marketing emails.</p> </div>  <div class="row alert" id="invite-alert"></div>  <div class="row alert" id="alert-not-verified"> <p>Check your email inbox; we need to verify your own email address first.</p> </div>  <div class="row alert" id="alert-resend"> <p>Trouble receiving emails?  Tick 'advanced' below for a link you can share in your own message.</p> </div>  <div class="row fields"> <div class="button submit"> <img src="./login_files/send" alt=""> <div>Invite</div> </div>  <div style="flex: 1; text-align: right; color: #aaa; font-size: 12pt"> <label for="invite-advanced">Advanced</label> <input type="checkbox" name="advanced" id="invite-advanced" form="null"> </div> </div> </div>  <div class="popout" id="invite-result"> <div class="row changer"> <input type="text" name="url" spellcheck="false" readonly=""> <div class="button" id="copy-url"><img src="./login_files/clipboard" alt="Copy to clipboard"></div> </div>  <p class="subtext">You can cut-and-paste this to your own message  remember to keep it private between you and the other party.</p> </div> </form> </div>  <div id="profile" class="content"> <div class="tabs"> <ul class="nav"> <li class="current">Identity</li> <li>Change password</li> <li>Subscription</li> </ul>  <div class="main"> <div class="content"> <h2>Your identity</h2>  <form id="form-change-name"> <div class="changer row" id="name-changer"> <input type="text" placeholder="Your name" spellcheck="false"> <div class="button"><img src="./login_files/circle-tick" alt="Apply"></div> </div>  <div class="changer row" id="email-changer"> <input type="email" placeholder="Your email address"> <div class="button"><img src="./login_files/circle-tick" alt="Apply"></div> </div>  <ul class="checklist"> <li> <input id="newsletter" type="checkbox"><label for="newsletter">Receive newsletter <div class="subtext">Cleanfeed news, information and offers, sent by email</div> </label> </li>  </ul></form></div>  <div class="content"> <h2>Change your password</h2>  <p>You'll need to provide your current password.</p>  <form id="form-change-passwd"> <div class="row validated"> <input id="current-passwd" type="password" placeholder="Current password" size="20" autofocus="" autocomplete="off"> <div class="alert"></div> </div>  <div class="row validated"> <input id="new-passwd" type="password" placeholder="New password" size="20" autocomplete="off"> <div class="alert"></div> </div>  <div class="row validated"> <input id="new-passwd-verify" type="password" placeholder="New password again" size="20" autocomplete="off"> <div class="alert"></div> </div>  <div class="row alert" id="alert-change-passwd"></div>  <div class="row"> <div class="button submit"> <img src="./login_files/send" alt=""> <div>Change password</div> </div> </div> </form>  <div class="subtext"> <p>The new password should be 5 characters or more, with at least one capital letter, number or symbol.</p> </div> </div>  <div class="content"> <h2>Manage your subscription</h2>  <p>For payments and upgrades, go to the <a href="https://cleanfeed.net/studio#" onclick="go_subs()">subscription centre</a>.</p>  <p class="subtext">This will open in a new window.</p> </div> </div> </div> </div>  <div id="audio" class="content"> <div class="tabs"> <ul class="nav"> <li class="current">Audio quality</li> <li>Playback device</li> <li>Source devices</li> </ul>  <div class="main"> <div class="content"> <h2>Remote audio quality</h2>  <p>Change the settings used on the network for remote audio.</p>  <form id="quality"> <div class="row changer"> <select name="quality"> <option value="talkback" title="A mono feed for minimal talkback and monitoring, with lowest network requirements.">Low-quality talkback</option> <option value="speech" title="The recommended choice for the highest quality speech, including over WiFi and mobile.">Speech optimised</option> <option value="music" title="The recommended choice for stereo music and production.">Music optimised</option> <option value="max-mono" class="pro pro_label" name="max-mono" title="The highest quality in mono. Provided here for testing but not recommended; typically requires optimal network conditions over a wired, private network. Try Speech optimised for near-identical audio quality with fewer dropouts." disabled="">256kbps mono</option> <option value="max-stereo" class="pro pro_label" name="max-stereo" title="The highest quality in stereo. Provided here for testing but not recommended; typically requires optimal network conditions over a wired, private network. Try Music optimised for near-identical audio quality with fewer dropouts." disabled="">320kbps stereo</option> </select> <div class="button"><img src="./login_files/circle-tick" alt="Apply"></div> </div>  <p class="subtext"></p> </form> </div>  <div class="content"> <h2>Playback device <div class="insignia insignia_pro"></div></h2>  <p>Received audio and clips will be heard through this audio device:</p>  <form> <div class="row validated" id="playback"> <div class="changer"> <select class="pro"></select> <div class="button"> <img src="./login_files/circle-tick" alt="Apply"> </div> </div> <div class="alert"></div> </div> </form>  <p class="subtext">It is not recommended to switch device device during live use or recording.</p> </div>  <div class="content"> <h2>Local audio sources <div class="insignia insignia_pro"></div></h2>  <p>The number of capture devices, such as microphones or line input:</p>  <div class="row fields"> <select id="number-of-capture-devices" class="pro"> <option value="1">1</option> <option value="2">2</option> <option value="3">3</option> <option value="4">4</option> </select> </div>  <p class="subtext">It is not recommended to add or change audio sources during live use or recording.</p> </div> </div> </div> </div>  <div id="record" class="content"> <h2>Record this Cleanfeed session</h2>  <form id="form-record" onsubmit="return false"> <div class="row fields"> <input id="name" type="text" placeholder="Name the recording"> </div>  <div class="row fields"> <input name="timestamp" id="record-timestamp" type="checkbox" checked=""> <label for="record-timestamp">Add day &amp; time to file name</label> </div>  <div class="row"> <select id="record-mode" name="mode"> <option value="me">Our audio only</option> <option value="you">Other parties only</option> <option value="everyone" selected="">Everyone</option> <option value="split">Separate tracks</option> <option value="multi">Multitrack (Beta)</option> </select> </div>  <p class="subtext"></p>  <div class="row alert"> <p>Update to the latest browser to enable recording.</p> </div>  <div class="row"> <div class="button submit"> <img src="./login_files/circle" alt=""> <div>Record</div> </div> </div> </form> </div>  <div id="upgrade" class="content"> <h2><img src="./login_files/wxp" alt="Cleanfeed Pro" style="max-width: 320px; width: 100%"></h2>  <p>Sign up  support the development of Cleanfeed, and get extra features:</p>  <ul style="font-size: 70%"> <li>Built-in clips player, for pre-produced idents, music or interviews</li>  <li>Use extra microphones and local devices</li>  <li>New ways to route and control your audio, including echo cancellation;  for guests without professional equipment.</li>  <li>Higher bitrates</li>  <li><em>... and more!</em></li> </ul>  <p class="subtext">Choose <span class="verbatim">Upgrade</span> to see your options before deciding; or you can <span class="verbatim">Try Pro</span> to experience Cleanfeed Pro with an audible watermark.</p>  <div class="row"> <div class="button good submit" onclick="go_subs()"> <div>Sign up</div> </div>  <div class="button" onclick="trial_begin()"> <div>Try Pro</div> </div> </div> </div>  <div id="on-ios" class="content"> <h2>Your device is limited here</h2>  <p>Using an Apple iPad or iPhone with Cleanfeed is limited to guests of a session.</p>  <img src="./login_files/chrome" align="right" width="50" height="50" style="padding-left: 10px" alt="Chrome logo">  <p>Instead we suggest you try Google Chrome on a </p><ul> <li>PC or Mac;</li> <li>Android phone or tablet.</li> </ul> <p></p>  <p class="subtext">Unfortunately we're limited by Apple's web browsing on their mobile devices. We hope to bring Cleanfeed to the iPhone and iPad soon.</p> </div>  <div id="bail" class="content"> <h2>Cleanfeed has stopped</h2>  <p>Some kind of error occurred, it could be our fault, or some kind of disruption to your service. We're doing our best to continue live audio.</p>  <img src="./login_files/download" align="right" width="50" height="50" style="opacity: 0.2; padding: 0.2em" alt="">  <p>We'll also attempt to preserve any recordings in progress. Select the 'cross' icon so you can hopefully download these.</p>  <p>But now, most features will no longer work. Use your browser's <span class="verbatim">reload</span> to get started again.</p>  <div class="with-error"> <p>If it keeps happening then let us know, along with the message below:</p>  <div class="tty"></div> </div>  <p class="subtext">What's happening could be well be a bug. We'd definitely hope to display a more meaningful explanation than this.</p> </div>  <div id="no-chrome" class="content"> <h2>Please use Chrome</h2>  <img src="./login_files/chrome" align="right" width="50" height="50" style="padding-left: 10px" alt="Chrome icon">  <p>Please select the Chrome browser, or you can cut-and-paste this web address:</p>  <p class="tty" id="chrome-url"></p>  <div class="subtext"> <p>We all want Cleanfeed to be as reliable as possible; focusing on just one browser helps with this.</p>  <p>We look forward to supporting your preferred browser in the future though. Thank you for your patience and support.</p> </div> </div>  <div id="old-chrome" class="content"> <h2>Your browser is old</h2>  <img src="./login_files/chrome" align="right" width="50" height="50" style="padding-left: 10px" alt="Chrome icon">  <p>You're using an old version of the Chrome browser.</p>  <p>Cleanfeed may work on older browsers, but some features may not function.</p>  <p class="subtext">The vast majority of Cleanfeed users are using the latest version, and we recommend you also keep yours up-to-date. Check you're using automatic updates by following <a href="https://support.google.com/chrome/answer/95414">Google's instructions</a>, or ignore our recommendation and try it anyway.</p>  <div class="button submit" onclick="finish_overlay()"> <img src="./login_files/play" alt=""> <div>Ignore and try it</div> </div> </div>  <div id="no-device" class="content"> <h2>You've blocked your audio device</h2>  <img src="./login_files/no-mic" align="right" width="179" height="151" style="padding-left: 20px" alt="Microphone blocked icon in Chrome">  <p>You've blocked Cleanfeed from using your audio device or microphone.</p>  <p>Click the camera icon in the browser's address bar to "Allow" access, then reload the page.</p>  <div class="button submit" onclick="location.reload()"> <img src="./login_files/again" alt=""> <div>Reload</div> </div> </div>  <div id="bad-device" class="content"> <h2>No audio device</h2>  <img src="./login_files/no-mic" align="right" width="179" height="151" style="padding-left: 20px" alt="Microphone blocked icon in Chrome">  <p>Cleanfeed isn't able to find your audio device or microphone. Instead we're getting:</p>  <div class="tty"></div>  <p>Be sure to check that:</p><p>  </p><ul> <li>your microphone or interface is plugged in and powered on</li>  <li>you've selected it using the camera icon in the browser's address bar</li> </ul>  <p>Once you've resolved the issue, reload to try again.</p>  <div class="button submit" onclick="location.reload()"> <img src="./login_files/again" alt=""> <div>Reload</div> </div> </div>  <div id="stolen" class="content"> <h2>You've connected from elsewhere</h2>  <p>You've joined the same Cleanfeed from another device or browser window, so we've stopped this one.</p>  <p class="subtext">If you need another Cleanfeed, you can use a second invitation or login.</p> </div>  <div id="disconnected" class="content"> <h2>You've lost connection to Cleanfeed</h2>  <p>A problem has occurred. We're doing our best to continue live audio.</p>  <img src="./login_files/download" align="right" width="50" height="50" style="opacity: 0.2; padding: 0.2em" alt="">  <p>We'll also preserve any recordings in progress. Select the cross icon above to return and download these.</p>  <p>But now, most features will no longer work. Use your browser's <span class="verbatim">reload</span> to get started again.</p>  <p class="subtext">This can happen when you lose part or all of your Internet connection; perhaps by moving from WiFi to mobile broadband.</p> </div>  <div id="hup" class="content"> <h2>The server has hung up</h2>  <p>You have been rejected in a way that was not expected. The reason given is:</p>  <div id="hup-text" class="tty"></div>  <p>For now you will probably want to press your browser's 'reload' button to start again.</p>  <p class="subtext">If it keeps happening then please let us know, including the content of this message.</p> </div> </div>  <div id="login" class="entry page plum login" style="visibility: inherit;"> <a href="https://cleanfeed.net/"><img src="./login_files/wy" class="logo" alt="Cleanfeed"></a>  <form class="popout engaged" onsubmit="return do_login();" style=""> <input type="text" name="handle" spellcheck="false" placeholder="Login" autocorrect="off" autocapitalize="off"><br>  <div class="validated" style="margin-top: 0"> <input id="password" type="password" name="passwd" placeholder="Password"> <div class="alert"></div> </div>  <div class="row" style="margin-top: 0.8em"> <div class="button good submit"> <img src="./login_files/play" alt=""> <div>Start</div> <img src="./login_files/waiting" alt="Waiting" class="waiting"></div> </div>  <div style="font-size: 9pt; padding-top: 32px"> <a href="https://cleanfeed.net/studio" onclick="return start_forgot()">Forgotten your details?</a> </div>  <input type="submit" style="display: none"> </form>  <div id="forgot"> <form class="popout" onsubmit="return do_forgot();"> <div class="row validated"> <div class="fields"> <input type="email" name="email" spellcheck="false" placeholder="Email address"> </div> <div class="alert"></div> </div>  <div class="row" style="margin-top: 0.8em"> <div class="button submit disabled"> <img src="./login_files/send" alt=""> <div>Request</div> <img src="./login_files/waiting" alt="Waiting" class="waiting"></div> </div>  <input type="submit" style="display: none"> </form>  <p class="subtext popout"> Thanks, we'll look up everything we have for that address. Please check your inbox; you should receive an email shortly. </p> </div>  <footer>Copyright  2019 Cleanfeed&nbsp;LLP  <a href="https://cleanfeed.net/terms">Terms</a></footer> </div>  <div id="signup" class="entry page plum"> <img src="./login_files/wx" class="logo" alt="Cleanfeed">  <div class="content">  <p>It just takes a moment to sign up for a free Cleanfeed account. Once you've completed the details below we just need to verify your email address.</p>  <form id="signup-form" onsubmit="do_signup(); return false">  <h3>Tell us about you</h3>  <div class="validated row"> <input name="name" type="text" placeholder="Your name" spellcheck="false" required=""> <div class="alert"></div> </div>  <div class="validated row"> <input name="email" type="email" spellcheck="false" placeholder="Your email address" required=""> <div class="alert"></div> </div>  <p class="subtext">These details are private and we only share them with the people you communicate with. Cleanfeed isn't a social network.</p>  <h3>Choose a login</h3>  <div class="validated row"> <input name="handle" type="text" placeholder="Login name" spellcheck="false" required=""> <div class="alert"></div> </div>  <div class="validated row"> <input name="passwd" type="password" placeholder="New password" size="20" autocomplete="off" required=""> <div class="alert"></div> </div>  <div class="validated row"> <input name="passwd-verify" type="password" placeholder="New password again" size="20" autocomplete="off" required=""> <div class="alert"></div> </div>  <h3>Your preference</h3>  <ul class="checklist"> <li> <input name="newsletter" id="optin" type="checkbox"><label for="optin">Receive newsletter <div class="subtext">Cleanfeed news, information and offers, sent by email. Leave this unchecked for only essential emails about your account.</div></label> </li> </ul>  <h3>Read and agree to the terms</h3>  <iframe class="terms" data-src="terms" src="./login_files/saved_resource.html"></iframe>  <ul class="checklist"> <li> <input name="terms" type="checkbox" id="terms" required=""><label for="terms">I have read and agree to the terms above</label> </li>  <li> <input name="over_age" type="checkbox" id="over_age" required=""><label for="over_age">I am over 16 years of age</label> </li> </ul>  <div id="signup-alert" class="alert"></div>  <div class="row"> <div class="button good submit" onclick="do_signup()"> <img src="./login_files/send" alt=""> <div>Sign up</div> </div> </div>  <input type="submit" style="display: none"> </form>  </div>  <footer>Copyright  2019 Cleanfeed&nbsp;LLP</footer> </div>  <div id="recover" class="entry page plum"> <img src="./login_files/wx" class="logo" alt="Cleanfeed">  <div class="content">  <p>Choose a new password to recover the account.</p>  <form id="recover-form" onsubmit="do_recover(); return false">  <div class="validated row"> <input name="passwd" type="password" placeholder="New password" size="20" autocomplete="off" required=""> <div class="alert"></div> </div>  <div class="validated row"> <input name="passwd-verify" type="password" placeholder="New password again" size="20" autocomplete="off" required=""> <div class="alert"></div> </div>  <div id="recover-alert" class="row alert"></div>  <div class="row"> <div class="button submit" onclick="do_recover()"> <img src="./login_files/send" alt=""> <div>Set password</div> </div> </div>  </form>  </div>  <footer>Copyright  2019 Cleanfeed&nbsp;LLP</footer> </div>    </body></html>